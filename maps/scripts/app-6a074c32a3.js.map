{"version":3,"sources":["scripts/app.js"],"names":["widgetDefinitions","MetricDataModel","ConvertedMetricDataModel","CumulativeMetricDataModel","CgroupCPUUsageMetricDataModel","CgroupCPUHeadroomMetricDataModel","CgroupMemoryUsageMetricTimeSeriesDataModel","ContainerMemoryUsageMetricDataModel","ContainerNetworkBytesMetricDataModel","ContainerMultipleMetricDataModel","ContainerMultipleCumulativeMetricDataModel","CgroupMemoryHeadroomMetricDataModel","MemoryUtilizationMetricDataModel","NetworkBytesMetricDataModel","CpuUtilizationMetricDataModel","PerCpuUtilizationMetricDataModel","MultipleMetricDataModel","MultipleCumulativeMetricDataModel","DummyMetricDataModel","DiskLatencyMetricDataModel","CumulativeUtilizationMetricDataModel","CgroupMemoryUtilizationMetricDataModel","config","onSettingsClose","resultFromModal","widgetModel","filter","definitions","name","title","directive","dataAttrName","dataModelType","dataModelOptions","size","width","height","enableVerticalResize","group","attrs","forcey","integer","percentage","conversionFunction","value","metricDefinitions","{key} in","{key} out","established","time_wait","close_wait","settingsModalOptions","templateUrl","controller","hasLocalSettings","{key} read","{key} write","page faults","major page faults","retranssegs","timeouts","listendrops","fastretrans","slowstartretrans","syncretrans","enableCpuFlameGraph","push","enableContainerWidgets","requireContainerFilter","area","{key} shares","{key} periods","{key}","$inject","defaultWidgets","emptyWidgets","containerWidgets","angular","module","factory","PMAPIService","$http","$log","$rootScope","$q","getContext","params","baseURI","properties","protocol","host","port","settings","method","url","contextType","contextValue","polltimeout","pollTimeout","toString","timeout","then","response","data","context","reject","getHostspecContext","hostspec","getHostnameContext","hostname","getLocalContext","getArchiveContext","archiveFile","getMetricsValues","names","pmids","forEach","isDefined","PMID","length","join","isUndefined","timestamp","s","us","values","cachePMIDs","getInstanceDomainsByIndom","indom","instances","inames","instance","cache","getInstanceDomainsByName","convertTimestampToMillis","mapMetricNamesToInstanceDomains","responses","instanceDomains","inst","appendInstanceDomains","deferred","defer","instanceDomainPromises","ids","_","map","all","dict","result","resolve","errors","updates","update","promise","getMetrics","metrics","d","pmid","MetricListService","SimpleMetric","CumulativeMetric","ConvertedMetric","CumulativeConvertedMetric","DerivedMetric","getOrCreateMetric","metric","find","simpleMetrics","el","subscribers","getOrCreateCumulativeMetric","getOrCreateConvertedMetric","getOrCreateCumulativeConvertedMetric","getOrCreateDerivedMetric","derivedFunction","derivedMetrics","destroyMetric","index","indexOf","splice","destroyDerivedMetric","clearMetricList","clearData","clearDerivedMetricList","getDerivedMetricList","getSimpleMetricList","ModalService","$uibModal","showModal","customModal","customModalOptions","modal","modalOptions","backdrop","extend","defaultModal","defaultModalOptions","$scope","$uibModalInstance","ok","close","dismiss","open","keyboard","modalFade","template","closeButtonText","actionButtonText","headerText","bodyText","Metric","this","prototype","pushValue","iid","iname","overflow","self","x","y","parseInt","window","interval","key","deleteInvalidInstances","currentInstances","currentInstance","MetricService","getInames","updateValues","base","diffValue","convertedValue","previousValue","previousTimestamp","FlameGraphService","toastr","generate","get","success","error","cpuFlameGraph","$timeout","DashboardService","link","scope","ready","processing","id","getGuid","generateFlameGraph","restrict","SimpleMetricDataModel","WidgetDataModel","DataModel","Object","create","init","call","updateScope","destroy","cpuSysMetric","cpuUserMetric","cpuUserInstance","cpuSysLastValue","cpuUserLastValue","returnValues","cpuSysInstance","widgetDefinition","inMetric","outMetric","lastValue","pushReturnValues","metricName","widgetScope","widget","definition","replace","cachedMemMetric","usedMemMetric","freeMemMetric","buffersMemMetric","usedValue","cachedValue","freeValue","buffersValue","readActiveMetric","writeActiveMetric","readMetric","writeMetric","calculateValues","rawactiveMetric","outputArr","rawactiveInstance","element","rawactiveLastValue","rawMetric","ncpuMetric","cpuInstance","cpuCount","keyName","ContainerMetadataService","containerIdExist","idDictionary","checkContainerName","checkContainerFilter","cgroupConversionFunction","memConversionFunction","containerMemMetric","containerValue","total","physmemConversionFunction","usageMetric","limitMetric","physmemMetric","lastPhysmemValue","limitInstance","lastLimitValue","cpuUsageMetric","cpuSharesMetric","cpuPeriodsMetric","cpuSharesInstance","cpuSharesValue","ncpuInstance","ncpuValue","$interval","$location","cancelInterval","intervalPromise","cancel","updateMetricsCallback","loopErrors","flags","contextAvailable","updateMetrics","callback","metricArr","metricInstance","currentMetric","$broadcast","status","updateContext","updateDerivedMetrics","intervalFunction","updateInterval","parseHostInput","hostMatch","match","contextUpdating","updateHost","search","initialize","containerFilter","containerList","selectedContainer","isHostnameExpanded","expandHostname","disableHostspecInput","disableContainerFilter","disableContainerSelect","containerSelectOverride","disableContainerSelectNone","disableHostnameInputContainerSelect","Math","floor","random","substring","D3Service","xAxisTickFormat","d3","time","format","Date","yAxisTickFormat","yAxisIntegerTickFormat","yAxisPercentageTickFormat","xFunction","yFunction","getId","$routeParams","$injector","idMap","parseId","split","clearIdDictionary","updateIdDictionary","getContainerList","containerParsedFromQuerystring","container","containerCgroups","containerNames","updateMetricsListener","$on","resolveId","instanceKey","instanceName","containerNameResolver","useCgroupId","reduce","obj","item","resolved","updateContainer","updateContainerFilter","e","debug","CustomWidgetSettingsCtrl","nv","models","tooltip","initTooltip","document","body","select","append","attr","classes","style","selectAll","classed","nvPointerEventsClass","nvtooltip","enabled","dataSeriesExists","dom","write","newContent","contentGenerator","node","innerHTML","positionTooltip","gravity","distance","snapDistance","chartContainer","hidden","hideDelay","lastPosition","left","top","duration","headerEnabled","position","event","clientX","clientY","valueFormatter","headerFormatter","keyFormatter","table","createElement","theadEnter","enter","html","tbodyEnter","trowEnter","p","series","highlight","color","i","each","opacityScale","scale","linear","domain","range","opacity","outerHTML","undefined","footer","Array","calcGravityOffset","pos","tmp","offsetHeight","offsetWidth","clientWidth","documentElement","clientHeight","read","gravityOffset","interrupt","transition","delay","oldTranslate","newTranslate","translateInterpolator","interpolateString","isHidden","styleTween","options","utils","optionsFunc","bind","_options","set","point","initOptions","lineTimeSeries","chart","addGraph","lineChart","useInteractiveGuideline","interactive","showLegend","showXAxis","showYAxis","margin","right","forceY","xAxis","tickFormat","yAxis","windowResize","datum","areaStackedTimeSeries","legend","stackedAreaChart","showControls","yDomain","MainCtrl","$document","$route","widgets","embed","version","visibilityChanged","webkitHidden","mozHidden","msHidden","activate","vm","inputHost","addEventListener","widgetNameArr","widgetsToLoad","concat","def","urlArr","dashboardOptions","hideToolbar","widgetButtons","hideWidgetName","hideWidgetSettings","addWidgetToURL","widgetObj","newUrl","removeWidgetFromURL","removeAllWidgetFromURL","resetDashboard","loadWidgets","addWidget","preventDefault","checkWidgetType","getElementById","focus","constant","routeConfig","$routeProvider","when","controllerAs","reloadOnSearch","otherwise","uniqueItems","groupBy","collection","groupFilter","invalid","torc","decorators","$provide","decorator","$delegate","originalCancel","retValue","isCancelled","moment","toastrConfig","allowHtml","timeOut","positionClass","preventDuplicates","progressBar","logProviderConfig","$logProvider","debugEnabled","run","$templateCache","put"],"mappings":"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","file":"scripts/app-6a074c32a3.js","sourcesContent":["/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n/*jslint node: true*/\n/*global angular*/\n\n(function () {\n    'use strict';\n\n    /* Widgets */\n    function widgetDefinitions(\n        MetricDataModel,\n        ConvertedMetricDataModel,\n        CumulativeMetricDataModel,\n        CgroupCPUUsageMetricDataModel,\n        CgroupCPUHeadroomMetricDataModel,\n        CgroupMemoryUsageMetricTimeSeriesDataModel,\n        ContainerMemoryUsageMetricDataModel,\n        ContainerNetworkBytesMetricDataModel,\n        ContainerMultipleMetricDataModel,\n        ContainerMultipleCumulativeMetricDataModel,\n        CgroupMemoryHeadroomMetricDataModel,\n        MemoryUtilizationMetricDataModel,\n        NetworkBytesMetricDataModel,\n        CpuUtilizationMetricDataModel,\n        PerCpuUtilizationMetricDataModel,\n        MultipleMetricDataModel,\n        MultipleCumulativeMetricDataModel,\n        DummyMetricDataModel,\n        DiskLatencyMetricDataModel,\n        CumulativeUtilizationMetricDataModel,\n        CgroupMemoryUtilizationMetricDataModel,\n        config) {\n\n        var onSettingsClose = function(resultFromModal, widgetModel) {\n            if (typeof resultFromModal !== 'undefined'){\n                widgetModel.filter = resultFromModal.filter;\n            }\n        };\n        var definitions = [\n            {\n                name: 'kernel.all.load',\n                title: 'Load Average',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: MetricDataModel,\n                dataModelOptions: {\n                    name: 'kernel.all.load'\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'CPU'\n            }, {\n                name: 'kernel.all.runnable',\n                title: 'Runnable',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: MetricDataModel,\n                dataModelOptions: {\n                    name: 'kernel.all.runnable'\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'CPU',\n                attrs: {\n                    forcey: 4,\n                    integer: true\n                }\n            }, {\n                name: 'kernel.all.cpu.sys',\n                title: 'CPU Utilization (System)',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: CumulativeUtilizationMetricDataModel,\n                dataModelOptions: {\n                    name: 'kernel.all.cpu.sys'\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'CPU',\n                attrs: {\n                    forcey: 1,\n                    percentage: true,\n                    integer: false\n                }\n            }, {\n                name: 'kernel.all.cpu.user',\n                title: 'CPU Utilization (User)',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: CumulativeUtilizationMetricDataModel,\n                dataModelOptions: {\n                    name: 'kernel.all.cpu.user'\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'CPU',\n                attrs: {\n                    forcey: 1,\n                    percentage: true,\n                    integer: false\n                }\n            }, {\n                name: 'kernel.all.cpu',\n                title: 'CPU Utilization',\n                directive: 'area-stacked-time-series',\n                dataAttrName: 'data',\n                dataModelType: CpuUtilizationMetricDataModel,\n                dataModelOptions: {\n                    name: 'kernel.all.cpu'\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'CPU',\n                attrs: {\n                    forcey: 1,\n                    percentage: true,\n                    integer: false\n                }\n            }, {\n                name: 'kernel.percpu.cpu.sys',\n                title: 'Per-CPU Utilization (System)',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: CumulativeUtilizationMetricDataModel,\n                dataModelOptions: {\n                    name: 'kernel.percpu.cpu.sys'\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'CPU',\n                attrs: {\n                    forcey: 1,\n                    percentage: true,\n                    integer: false\n                }\n            }, {\n                name: 'kernel.percpu.cpu.user',\n                title: 'Per-CPU Utilization (User)',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: CumulativeUtilizationMetricDataModel,\n                dataModelOptions: {\n                    name: 'kernel.percpu.cpu.user'\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'CPU',\n                attrs: {\n                    forcey: 1,\n                    percentage: true,\n                    integer: false\n                }\n            }, {\n                name: 'kernel.percpu.cpu',\n                title: 'Per-CPU Utilization',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: PerCpuUtilizationMetricDataModel,\n                dataModelOptions: {\n                    name: 'kernel.percpu.cpu'\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'CPU',\n                attrs: {\n                    forcey: 1,\n                    percentage: true,\n                    integer: false\n                }\n            }, {\n                name: 'mem.util.free',\n                title: 'Memory Utilization (Free)',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: ConvertedMetricDataModel,\n                dataModelOptions: {\n                    name: 'mem.util.free',\n                    conversionFunction: function (value) {\n                        return value / 1024 / 1024;\n                    }\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'Memory'\n            }, {\n                name: 'mem.util.used',\n                title: 'Memory Utilization (Used)',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: ConvertedMetricDataModel,\n                dataModelOptions: {\n                    name: 'mem.util.used',\n                    conversionFunction: function (value) {\n                        return value / 1024 / 1024;\n                    }\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'Memory'\n            }, {\n                name: 'mem.util.cached',\n                title: 'Memory Utilization (Cached)',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: ConvertedMetricDataModel,\n                dataModelOptions: {\n                    name: 'mem.util.cached',\n                    conversionFunction: function (value) {\n                        return value / 1024 / 1024;\n                    }\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'Memory'\n            }, {\n                name: 'mem',\n                title: 'Memory Utilization',\n                directive: 'area-stacked-time-series',\n                dataAttrName: 'data',\n                dataModelType: MemoryUtilizationMetricDataModel,\n                dataModelOptions: {\n                    name: 'mem'\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'Memory',\n                attrs: {\n                    percentage: false,\n                    integer: true\n                }\n            }, {\n                name: 'network.interface.out.drops',\n                title: 'Network Drops (Out)',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: MetricDataModel,\n                dataModelOptions: {\n                    name: 'network.interface.out.drops'\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'Network',\n                attrs: {\n                    forcey: 10,\n                    percentage: false,\n                    integer: true\n                }\n            }, {\n                name: 'network.interface.in.drops',\n                title: 'Network Drops (In)',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: MetricDataModel,\n                dataModelOptions: {\n                    name: 'network.interface.in.drops'\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'Network',\n                attrs: {\n                    forcey: 10,\n                    percentage: false,\n                    integer: true\n                }\n            }, {\n                name: 'network.interface.drops',\n                title: 'Network Drops',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: MultipleMetricDataModel,\n                dataModelOptions: {\n                    name: 'network.interface.drops',\n                    metricDefinitions: {\n                        '{key} in': 'network.interface.in.drops',\n                        '{key} out': 'network.interface.out.drops'\n                    }\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'Network',\n                attrs: {\n                    forcey: 10,\n                    percentage: false,\n                    integer: true\n                }\n            }, {\n                name: 'network.tcpconn.established',\n                title: 'TCP Connections (Estabilished)',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: MetricDataModel,\n                dataModelOptions: {\n                    name: 'network.tcpconn.established'\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'Network',\n                attrs: {\n                    percentage: false,\n                    integer: true\n                }\n            }, {\n                name: 'network.tcpconn.time_wait',\n                title: 'TCP Connections (Time Wait)',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: MetricDataModel,\n                dataModelOptions: {\n                    name: 'network.tcpconn.time_wait'\n                },\n                enableVerticalResize: false,\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                group: 'Network',\n                attrs: {\n                    percentage: false,\n                    integer: true\n                }\n            }, {\n                name: 'network.tcpconn.close_wait',\n                title: 'TCP Connections (Close Wait)',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: MetricDataModel,\n                dataModelOptions: {\n                    name: 'network.tcpconn.close_wait'\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'Network',\n                attrs: {\n                    percentage: false,\n                    integer: true\n                }\n            }, {\n                name: 'network.tcpconn',\n                title: 'TCP Connections',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: MultipleMetricDataModel,\n                dataModelOptions: {\n                    name: 'network.tcpconn',\n                    metricDefinitions: {\n                        'established': 'network.tcpconn.established',\n                        'time_wait': 'network.tcpconn.time_wait',\n                        'close_wait': 'network.tcpconn.close_wait'\n                    }\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'Network',\n                attrs: {\n                    percentage: false,\n                    integer: true\n                }\n            }, {\n                name: 'network.interface.bytes',\n                title: 'Network Throughput (kB)',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: NetworkBytesMetricDataModel,\n                dataModelOptions: {\n                    name: 'network.interface.bytes'\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'Network',\n                attrs: {\n                    percentage: false,\n                    integer: true\n                },\n                settingsModalOptions: {\n                    templateUrl: 'app/components/customWidgetSettings/customWidgetSettings.html',\n                    controller: 'CustomWidgetSettingsController'\n                },\n                hasLocalSettings: true,\n                onSettingsClose: onSettingsClose,\n                filter: ''\n            }, {\n                name: 'disk.iops',\n                title: 'Disk IOPS',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: MultipleCumulativeMetricDataModel,\n                dataModelOptions: {\n                    name: 'disk.iops',\n                    metricDefinitions: {\n                        '{key} read': 'disk.dev.read',\n                        '{key} write': 'disk.dev.write'\n                    }\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'Disk'\n            }, {\n                name: 'disk.bytes',\n                title: 'Disk Throughput (Bytes)',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: MultipleCumulativeMetricDataModel,\n                dataModelOptions: {\n                    name: 'disk.bytes',\n                    metricDefinitions: {\n                        '{key} read': 'disk.dev.read_bytes',\n                        '{key} write': 'disk.dev.write_bytes'\n                    }\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'Disk'\n            }, {\n                name: 'disk.dev.avactive',\n                title: 'Disk Utilization',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: CumulativeUtilizationMetricDataModel,\n                dataModelOptions: {\n                    name: 'disk.dev.avactive'\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'Disk',\n                attrs: {\n                    forcey: 1,\n                    percentage: true,\n                    integer: false\n                }\n            }, {\n                name: 'kernel.all.pswitch',\n                title: 'Context Switches',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: CumulativeMetricDataModel,\n                dataModelOptions: {\n                    name: 'kernel.all.pswitch'\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'CPU',\n                attrs: {\n                    percentage: false,\n                    integer: true\n                }\n            }, {\n                name: 'mem.vmstat.pgfault',\n                title: 'Page Faults',\n                directive: 'area-stacked-time-series',\n                dataAttrName: 'data',\n                dataModelType: MultipleCumulativeMetricDataModel,\n                dataModelOptions: {\n                    name: 'mem.vmstat.pgfault',\n                    metricDefinitions: {\n                        'page faults': 'mem.vmstat.pgfault',\n                        'major page faults': 'mem.vmstat.pgmajfault'\n                    }\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'Memory',\n                attrs: {\n                    percentage: false,\n                    integer: true\n                }\n            }, {\n                name: 'network.interface.packets',\n                title: 'Network Packets',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: MultipleCumulativeMetricDataModel,\n                dataModelOptions: {\n                    name: 'network.interface.packets',\n                    metricDefinitions: {\n                        '{key} in': 'network.interface.in.packets',\n                        '{key} out': 'network.interface.out.packets'\n                    }\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'Network',\n                attrs: {\n                    percentage: false,\n                    integer: true\n                },\n                settingsModalOptions: {\n                    templateUrl: 'app/components/customWidgetSettings/customWidgetSettings.html',\n                    controller: 'CustomWidgetSettingsController'\n                },\n                hasLocalSettings: true,\n                onSettingsClose: onSettingsClose,\n                filter: ''\n            }, {\n                name: 'network.tcp.retrans',\n                title: 'Network Retransmits',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: MultipleCumulativeMetricDataModel,\n                dataModelOptions: {\n                    name: 'network.tcp.retrans',\n                    metricDefinitions: {\n                        'retranssegs': 'network.tcp.retranssegs',\n                        'timeouts': 'network.tcp.timeouts',\n                        'listendrops': 'network.tcp.listendrops',\n                        'fastretrans': 'network.tcp.fastretrans',\n                        'slowstartretrans': 'network.tcp.slowstartretrans',\n                        'syncretrans': 'network.tcp.syncretrans'\n                    }\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'Network',\n                attrs: {\n                    forcey: 10,\n                    percentage: false,\n                    integer: true\n                }\n            }, {\n                name: 'disk.dev.latency',\n                title: 'Disk Latency',\n                directive: 'line-time-series',\n                dataAttrName: 'data',\n                dataModelType: DiskLatencyMetricDataModel,\n                dataModelOptions: {\n                    name: 'disk.dev.latency'\n                },\n                size: {\n                    width: '50%',\n                    height: '250px'\n                },\n                enableVerticalResize: false,\n                group: 'Disk',\n                attrs: {\n                    percentage: false,\n                    integer: true\n                }\n            }\n        ];\n\n        if (config.enableCpuFlameGraph) {\n          definitions.push({\n            name: 'graph.flame.cpu',\n            title: 'CPU Flame Graph',\n            directive: 'cpu-flame-graph',\n            dataModelType: DummyMetricDataModel,\n            size: {\n              width: '50%',\n              height: '250px'\n            },\n            enableVerticalResize: false,\n            group: 'CPU'\n          });\n        }\n\n        if (config.enableContainerWidgets) {\n            definitions.push(\n                {\n                    name: 'cgroup.cpuacct.usage',\n                    title: 'Per-Container CPU Utilization',\n                    directive: 'line-time-series',\n                    dataAttrName: 'data',\n                    dataModelType: CgroupCPUUsageMetricDataModel,\n                    dataModelOptions: {\n                        name: 'cgroup.cpuacct.usage'\n                    },\n                    size: {\n                        width: '50%',\n                        height: '250px'\n                    },\n                    enableVerticalResize: false,\n                    group: 'Container',\n                    requireContainerFilter: true,\n                    attrs: {\n                        forcey: 1,\n                        percentage: true,\n                        integer: false\n                    }\n                }, {\n                    name: 'cgroup.memory.usage',\n                    title: 'Per-Container Memory Usage (Mb)',\n                    directive: 'line-time-series',\n                    dataAttrName: 'data',\n                    dataModelType: CgroupMemoryUsageMetricTimeSeriesDataModel,\n                    dataModelOptions: {\n                        name: 'cgroup.memory.usage'\n                    },\n                    size: {\n                        width: '50%',\n                        height: '250px'\n                    },\n                    enableVerticalResize: false,\n                    group: 'Container',\n                    attrs: {\n                        percentage: false,\n                        integer: true,\n                        forcey: 10\n                    }\n                }, {\n                    name: 'container.memory.usage',\n                    title: 'Total Container Memory Usage (Mb)',\n                    directive: 'area-stacked-time-series',\n                    dataAttrName: 'data',\n                    dataModelType: ContainerMemoryUsageMetricDataModel,\n                    dataModelOptions: {\n                        name: 'container.memory.usage'\n                    },\n                    size: {\n                        width: '50%',\n                        height: '250px'\n                    },\n                    enableVerticalResize: false,\n                    group: 'Container',\n                    attrs: {\n                        percentage: false,\n                        integer: true\n                    }\n                }, {\n                    name: 'cgroup.memory.headroom',\n                    title: 'Per-Container Memory Headroom (Mb)',\n                    directive: 'line-time-series',\n                    dataAttrName: 'data',\n                    dataModelType: CgroupMemoryHeadroomMetricDataModel,\n                    dataModelOptions: {\n                        name: 'cgroup.memory.headroom'\n                    },\n                    size: {\n                        width: '50%',\n                        height: '250px'\n                    },\n                    enableVerticalResize: false,\n                    group: 'Container',\n                    requireContainerFilter: true,\n                    attrs: {\n                        forcey: 1,\n                        percentage: false,\n                        integer: true,\n                        area: true\n                    }\n                }, {\n                    name: 'cgroup.blkio.all.io_serviced',\n                    title: 'Container Disk IOPS',\n                    directive: 'line-time-series',\n                    dataAttrName: 'data',\n                    dataModelType: ContainerMultipleCumulativeMetricDataModel,\n                    dataModelOptions: {\n                        name: 'cgroup.blkio.all.io_serviced',\n                        metricDefinitions: {\n                            '{key} read': 'cgroup.blkio.all.io_serviced.read',\n                            '{key} write': 'cgroup.blkio.all.io_serviced.write'\n                        }\n                    },\n                    size: {\n                        width: '50%',\n                        height: '250px'\n                    },\n                    enableVerticalResize: false,\n                    group: 'Container',\n                    attrs: {\n                        percentage: false,\n                        integer: true\n                    }\n                }, {\n                    name: 'cgroup.blkio.all.io_service_bytes',\n                    title: 'Container Disk Throughput (Bytes)',\n                    directive: 'line-time-series',\n                    dataAttrName: 'data',\n                    dataModelType: ContainerMultipleCumulativeMetricDataModel,\n                    dataModelOptions: {\n                        name: 'cgroup.blkio.all.io_service_bytes',\n                        metricDefinitions: {\n                            '{key} read': 'cgroup.blkio.all.io_service_bytes.read',\n                            '{key} write': 'cgroup.blkio.all.io_service_bytes.write'\n                        }\n                    },\n                    size: {\n                        width: '50%',\n                        height: '250px'\n                    },\n                    enableVerticalResize: false,\n                    group: 'Container',\n                    attrs: {\n                        percentage: false,\n                        integer: true\n                    }\n                }, {\n                    name: 'cgroup.blkio.all.throttle.io_serviced',\n                    title: 'Container Disk IOPS (Throttled)',\n                    directive: 'line-time-series',\n                    dataAttrName: 'data',\n                    dataModelType: ContainerMultipleCumulativeMetricDataModel,\n                    dataModelOptions: {\n                        name: 'cgroup.blkio.all.throttle.io_serviced',\n                        metricDefinitions: {\n                            '{key} read': 'cgroup.blkio.all.throttle.io_serviced.read',\n                            '{key} write': 'cgroup.blkio.all.throttle.io_serviced.write'\n                        }\n                    },\n                    size: {\n                        width: '50%',\n                        height: '250px'\n                    },\n                    enableVerticalResize: false,\n                    group: 'Container',\n                    attrs: {\n                        percentage: false,\n                        integer: true\n                    }\n                }, {\n                    name: 'cgroup.blkio.all.throttle.io_service_bytes',\n                    title: 'Container Disk Throughput (Throttled) (Bytes)',\n                    directive: 'line-time-series',\n                    dataAttrName: 'data',\n                    dataModelType: ContainerMultipleCumulativeMetricDataModel,\n                    dataModelOptions: {\n                        name: 'cgroup.blkio.all.throttle.io_service_bytes',\n                        metricDefinitions: {\n                            '{key} read': 'cgroup.blkio.all.throttle.io_service_bytes.read',\n                            '{key} write': 'cgroup.blkio.all.throttle.io_service_bytes.write'\n                        }\n                    },\n                    size: {\n                        width: '50%',\n                        height: '250px'\n                    },\n                    enableVerticalResize: false,\n                    group: 'Container',\n                    attrs: {\n                        percentage: false,\n                        integer: true\n                    }\n                }, {\n                    name: 'cgroup.cpusched',\n                    title: 'Per-Container CPU Scheduler',\n                    directive: 'line-time-series',\n                    dataAttrName: 'data',\n                    dataModelType: ContainerMultipleMetricDataModel,\n                    dataModelOptions: {\n                        name: 'cgroup.cpusched',\n                        metricDefinitions: {\n                            '{key} shares': 'cgroup.cpusched.shares',\n                            '{key} periods': 'cgroup.cpusched.periods'\n                        }\n                    },\n                    size: {\n                        width: '50%',\n                        height: '250px'\n                    },\n                    enableVerticalResize: false,\n                    group: 'Container',\n                    attrs: {\n                        percentage: false,\n                        integer: true\n                    }\n                }, {\n                    name: 'cgroup.cpuacct.headroom',\n                    title: 'Per-Container CPU Headroom',\n                    directive: 'line-time-series',\n                    dataAttrName: 'data',\n                    dataModelType: CgroupCPUHeadroomMetricDataModel,\n                    dataModelOptions: {\n                        name: 'cgroup.cpuacct.headroom'\n                    },\n                    size: {\n                        width: '50%',\n                        height: '250px'\n                    },\n                    enableVerticalResize: false,\n                    group: 'Container',\n                    requireContainerFilter: true,\n                    attrs: {\n                        forcey: 1,\n                        percentage: true,\n                        integer: false,\n                        area: true\n                    }\n                }, {\n                    name: 'cgroup.cpusched.throttled_time',\n                    title: 'Per-Container Throttled CPU',\n                    directive: 'line-time-series',\n                    dataAttrName: 'data',\n                    dataModelType: ContainerMultipleCumulativeMetricDataModel,\n                    dataModelOptions: {\n                        name: 'cgroup.cpusched.throttled_time',\n                        metricDefinitions: {\n                            '{key}': 'cgroup.cpusched.throttled_time'\n                        }\n                    },\n                    size: {\n                        width: '50%',\n                        height: '250px'\n                    },\n                    enableVerticalResize: false,\n                    group: 'Container',\n                    attrs: {\n                        forcey: 5,\n                        percentage: false,\n                        integer: true\n                    }\n                }, {\n                    name: 'cgroup.memory.utilization',\n                    title: 'Per-Container Memory Utilization',\n                    directive: 'line-time-series',\n                    dataAttrName: 'data',\n                    dataModelType: CgroupMemoryUtilizationMetricDataModel,\n                    dataModelOptions: {\n                        name: 'cgroup.memory.utilization'\n                    },\n                    size: {\n                        width: '50%',\n                        height: '250px'\n                    },\n                    enableVerticalResize: false,\n                    group: 'Container',\n                    requireContainerFilter: true,\n                    attrs: {\n                        forcey: 1,\n                        percentage: true,\n                        integer: false,\n                        area: false\n                    }\n                }\n\n            );\n\n        }\n\n        return definitions;\n    }\n\n    var defaultWidgets = [\n        {\n            name: 'kernel.all.cpu',\n            size: {\n                width: '50%'\n            }\n        }, {\n            name: 'kernel.percpu.cpu',\n            size: {\n                width: '50%'\n            }\n        }, {\n            name: 'kernel.all.runnable',\n            size: {\n                width: '50%'\n            }\n        }, {\n            name: 'kernel.all.load',\n            size: {\n                width: '50%'\n            }\n        }, {\n            name: 'network.interface.bytes',\n            size: {\n                width: '50%'\n            }\n        }, {\n            name: 'network.tcpconn',\n            size: {\n                width: '50%'\n            }\n        }, {\n            name: 'network.interface.packets',\n            size: {\n                width: '50%'\n            }\n        }, {\n            name: 'network.tcp.retrans',\n            size: {\n                width: '50%'\n            }\n        }, {\n            name: 'mem',\n            size: {\n                width: '50%'\n            }\n        }, {\n            name: 'mem.vmstat.pgfault',\n            size: {\n                width: '50%'\n            }\n        }, {\n            name: 'kernel.all.pswitch',\n            size: {\n                width: '50%'\n            }\n        }, {\n            name: 'disk.iops',\n            size: {\n                width: '50%'\n            }\n        }, {\n            name: 'disk.bytes',\n            size: {\n                width: '50%'\n            }\n        }, {\n            name: 'disk.dev.avactive',\n            size: {\n                width: '50%'\n            }\n        }, {\n            name: 'disk.dev.latency',\n            size: {\n                width: '50%'\n            }\n        }\n    ];\n\n    var emptyWidgets = [];\n\n    var containerWidgets = [\n        {\n            name: 'cgroup.cpuacct.usage',\n            size: {\n                width: '50%'\n            }\n        }, {\n            name: 'container.memory.usage',\n            size: {\n                width: '50%'\n            }\n        }, {\n            name: 'cgroup.memory.usage',\n            size: {\n                width: '50%'\n            }\n        }, {\n            name: 'cgroup.memory.headroom',\n            size: {\n                width: '50%'\n            }\n        }, {\n            name: 'container.disk.iops',\n            size: {\n                width: '50%'\n            }\n        }, {\n            name: 'container.disk.bytes',\n            size: {\n                width: '50%'\n            }\n        }\n    ];\n\n    angular\n        .module('widget', [\n            'datamodel',\n            'chart',\n            'flamegraph',\n            'customWidgetSettings'\n        ])\n        .factory('widgetDefinitions', widgetDefinitions)\n        .value('defaultWidgets', defaultWidgets)\n        .value('emptyWidgets', emptyWidgets)\n        .value('containerWidgets', containerWidgets);\n\n})();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n /*global _*/\n\n(function () {\n    'use strict';\n\n    function PMAPIService($http, $log, $rootScope, $q) {\n\n        function getContext(params) {\n            var baseURI = $rootScope.properties.protocol + '://' + $rootScope.properties.host + ':' +\n               $rootScope.properties.port;\n            var settings = {};\n            settings.method = 'GET';\n            settings.url = baseURI + '/pmapi/context';\n            settings.params = {};\n            settings.params[params.contextType] = params.contextValue;\n            settings.params.polltimeout = params.pollTimeout.toString();\n            settings.timeout = 5000;\n\n            return $http(settings)\n                .then(function (response) {\n                    if (response.data.context) {\n                        return response.data.context;\n                    }\n\n                    return $q.reject('context is undefined');\n                });\n        }\n\n        function getHostspecContext(hostspec, pollTimeout) {\n            var params = {};\n            params.contextType = 'hostspec';\n            params.contextValue = hostspec;\n            params.pollTimeout = pollTimeout;\n            return getContext(params);\n        }\n\n        function getHostnameContext(hostname, pollTimeout) {\n            var params = {};\n            params.contextType = 'hostname';\n            params.contextValue = hostname;\n            params.pollTimeout = pollTimeout;\n            return getContext(params);\n        }\n\n        function getLocalContext(pollTimeout) {\n            var params = {};\n            params.contextType = 'local';\n            params.contextValue = 'ANYTHING';\n            params.pollTimeout = pollTimeout;\n            return getContext(params);\n        }\n\n        function getArchiveContext(archiveFile, pollTimeout) {\n            var params = {};\n            params.contextType = 'archivefile';\n            params.contextValue = archiveFile;\n            params.pollTimeout = pollTimeout;\n            return getContext(params);\n        }\n\n        function getMetricsValues(context, names, pmids) {\n            var baseURI = $rootScope.properties.protocol + '://' + $rootScope.properties.host + ':' +\n               $rootScope.properties.port;\n            var settings = {};\n            settings.method = 'GET';\n            settings.url = baseURI + '/pmapi/' + context + '/_fetch';\n            settings.params = {};\n            pmids = [];\n\n            angular.forEach(names, function(response) {\n                if (angular.isDefined(PMID[response])){\n                    pmids.push(PMID[response]);\n                }\n            });\n\n            if (angular.isDefined(pmids) && pmids !== null && pmids.length > 0)  {\n                settings.params.pmids = pmids.join(',');\n            } else if (angular.isDefined(names) && names !== null) {\n                settings.params.names = names.join(',');\n            }\n \n            return $http(settings)\n                .then(function (response) {\n                    if (angular.isUndefined(response.data.timestamp) ||\n                        angular.isUndefined(response.data.timestamp.s) ||\n                        angular.isUndefined(response.data.timestamp.us) ||\n                        angular.isUndefined(response.data.values)) {\n                        return $q.reject('metric values is empty');\n                    }\n                        \n                    cachePMIDs(response.data.values);\n                    \n                    return response;\n                });\n\n        }\n\n        function getInstanceDomainsByIndom(context, indom, instances, inames) {\n            var baseURI = $rootScope.properties.protocol + '://' + $rootScope.properties.host + ':' +\n                $rootScope.properties.port;\n            var settings = {};\n            settings.method = 'GET';\n            settings.url = baseURI + '/pmapi/' + context + '/_indom';\n            settings.params = {indom: indom}; // required\n\n            if (angular.isDefined(instances) && instances !== null) {\n                settings.params.instance = instances.join(',');\n            }\n\n            if (angular.isDefined(inames) && inames !== null) {\n                settings.params.inames = inames.join(',');\n            }\n\n            settings.cache = true;\n\n            return $http(settings)\n                .then(function (response) {\n                    if (angular.isDefined(response.data.indom) ||\n                        angular.isDefined(response.data.instances)) {\n                       return response;\n                    }\n\n                    return $q.reject('instances is undefined');\n                });\n        }\n\n        function getInstanceDomainsByName(context, name, instances, inames) {\n            var baseURI = $rootScope.properties.protocol + '://' + $rootScope.properties.host + ':' +\n                $rootScope.properties.port;\n            var settings = {};\n            settings.method = 'GET';\n            settings.url = baseURI + '/pmapi/' + context + '/_indom';\n            settings.params = {name: name};\n\n            if (angular.isDefined(instances) && instances !== null) {\n                settings.params.instance = instances.join(',');\n            }\n\n            if (angular.isDefined(inames) && inames !== null) {\n                settings.params.inames = inames.join(',');\n            }\n\n            settings.cache = true;\n\n            return $http(settings)\n                .then(function (response) {\n                    if (angular.isDefined(response.data.instances)) {\n                      return response;\n                    }\n                    return $q.reject('instances is undefined');\n                });\n        }\n\n        function convertTimestampToMillis(response) {\n            // timestamp is in milliseconds\n            var timestamp = (response.data.timestamp.s * 1000) +\n                (response.data.timestamp.us / 1000);\n            var values = response.data.values;\n\n            return {\n                timestamp: timestamp,\n                values: values\n            };\n\n        }\n\n        function mapMetricNamesToInstanceDomains(responses) {\n            var instanceDomains = {};\n            angular.forEach(responses, function (response)  {\n                var indom = response.data.indom;\n                var name = response.config.params.name;\n                var inames = {};\n                angular.forEach(response.data.instances, function (inst) {\n                    inames[inst.instance.toString()] = inst.name;\n                });\n                instanceDomains[name.toString()] = {\n                    indom: indom,\n                    name: name,\n                    inames: inames\n                };\n            });\n\n            return instanceDomains;\n        }\n\n        function appendInstanceDomains(context, data) {\n            var deferred = $q.defer();\n            var instanceDomainPromises = [];\n            angular.forEach(data.values, function (value) {\n                var ids = _.map(value.instances, function (inst) {\n                    if (angular.isDefined(inst.instance) &&\n                        inst.instance !== null) {\n                        return inst.instance;\n                    } else {\n                        return -1;\n                    }\n                });\n                instanceDomainPromises.push(\n                    getInstanceDomainsByName(context, value.name, ids));\n            });\n\n            $q.all(instanceDomainPromises)\n                .then(function (responses) {\n                    var dict = mapMetricNamesToInstanceDomains(responses);\n\n                    var result = {\n                        timestamp: data.timestamp,\n                        values: data.values,\n                        inames: dict\n                    };\n\n                    deferred.resolve(result);\n                }, function (errors) {\n                    deferred.reject(errors);\n                }, function (updates) {\n                    deferred.update(updates);\n                });\n\n            return deferred.promise;\n        }\n\n        function getMetrics(context, metrics) {\n            return getMetricsValues(context, metrics)\n                    .then(convertTimestampToMillis)\n                    .then(function(data) {\n                        return appendInstanceDomains(context, data);\n                    });\n        }\n        var PMID = {};\n        function cachePMIDs(data) {\n            angular.forEach(data, function (d) {\n                PMID[d.name]=d.pmid;\n            });\n        }\n\n         return {\n            getHostspecContext: getHostspecContext,\n            getHostnameContext: getHostnameContext,\n            getLocalContext: getLocalContext,\n            getArchiveContext: getArchiveContext,\n            getMetricsValues: getMetricsValues,\n            getMetrics: getMetrics,\n            getInstanceDomainsByIndom: getInstanceDomainsByIndom,\n            getInstanceDomainsByName: getInstanceDomainsByName\n        };\n    }\n\n    // PMAPI Service factory\n    angular\n        .module('pmapi', [])\n        .factory('PMAPIService', PMAPIService);\n\n    PMAPIService.$inject = ['$http', '$log', '$rootScope', '$q'];\n\n})();\n\n/**!\n *\n *  Copyright 2016 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n /*global _*/\n\n (function () {\n    'use strict';\n\n\n    /**\n    * @name MetricListService\n    * @desc\n    */\n    function MetricListService($rootScope, $http, $log, $q, PMAPIService, SimpleMetric, CumulativeMetric, ConvertedMetric, CumulativeConvertedMetric, DerivedMetric) {\n        var simpleMetrics = [],\n            derivedMetrics = [];\n\n        /**\n        * @name getOrCreateMetric\n        * @desc\n        */\n        function getOrCreateMetric(name) {\n            var metric = _.find(simpleMetrics, function (el) {\n                return el.name === name;\n            });\n\n            if (angular.isUndefined(metric)) {\n                metric = new SimpleMetric(name);\n                simpleMetrics.push(metric);\n            } else {\n                metric.subscribers++;\n            }\n            return metric;\n        }\n\n        /**\n        * @name getOrCreateCumulativeMetric\n        * @desc\n        */\n        function getOrCreateCumulativeMetric(name) {\n            var metric = _.find(simpleMetrics, function (el) {\n                return el.name === name;\n            });\n\n            if (angular.isUndefined(metric)) {\n                metric = new CumulativeMetric(name);\n                simpleMetrics.push(metric);\n            } else {\n                metric.subscribers++;\n            }\n            return metric;\n        }\n\n        /**\n        * @name getOrCreateConvertedMetric\n        * @desc\n        */\n        function getOrCreateConvertedMetric(name, conversionFunction) {\n            var metric = _.find(simpleMetrics, function (el) {\n                return el.name === name;\n            });\n\n            if (angular.isUndefined(metric)) {\n                metric = new ConvertedMetric(name, conversionFunction);\n                simpleMetrics.push(metric);\n            } else {\n                metric.subscribers++;\n            }\n            return metric;\n        }\n\n        /**\n        * @name getOrCreateCumulativeConvertedMetric\n        * @desc\n        */\n        function getOrCreateCumulativeConvertedMetric(name, conversionFunction) {\n            var metric = _.find(simpleMetrics, function (el) {\n                return el.name === name;\n            });\n\n            if (angular.isUndefined(metric)) {\n                metric = new CumulativeConvertedMetric(name, conversionFunction);\n                simpleMetrics.push(metric);\n            } else {\n                metric.subscribers++;\n            }\n            return metric;\n        }\n\n        /**\n        * @name getOrCreateDerivedMetric\n        * @desc\n        */\n        function getOrCreateDerivedMetric(name, derivedFunction) {\n            var metric = _.find(derivedMetrics, function (metric) {\n                return metric.name === name;\n            });\n\n            if (angular.isUndefined(metric)) {\n                metric = new DerivedMetric(name, derivedFunction);\n                derivedMetrics.push(metric);\n            } else {\n                metric.subscribers++;\n            }\n            return metric;\n        }\n\n        /**\n        * @name destroyMetric\n        * @desc\n        */\n        function destroyMetric(name) {\n            var index,\n                metric = _.find(simpleMetrics, function (el) {\n                    return el.name === name;\n                });\n\n            metric.subscribers--;\n\n            if (metric.subscribers < 1) {\n                index = simpleMetrics.indexOf(metric);\n                if (index > -1) {\n                    simpleMetrics.splice(index, 1);\n                }\n            }\n        }\n\n        /**\n        * @name destroyDerivedMetric\n        * @desc\n        */\n        function destroyDerivedMetric(name) {\n            var index,\n                metric = _.find(derivedMetrics, function (el) {\n                    return el.name === name;\n                });\n\n            metric.subscribers--;\n\n            if (metric.subscribers < 1) {\n                index = derivedMetrics.indexOf(metric);\n                if (index > -1) {\n                    derivedMetrics.splice(index, 1);\n                }\n            }\n        }\n\n        /**\n        * @name clearMetricList\n        * @desc\n        */\n        function clearMetricList() {\n            angular.forEach(simpleMetrics, function (metric) {\n                metric.clearData();\n            });\n        }\n\n        /**\n        * @name clearDerivedMetricList\n        * @desc\n        */\n        function clearDerivedMetricList() {\n            angular.forEach(derivedMetrics, function (metric) {\n                metric.clearData();\n            });\n        }\n\n        function getDerivedMetricList() {\n            return derivedMetrics;\n        }\n\n        function getSimpleMetricList() {\n            return simpleMetrics;\n        }\n\n        return {\n            getOrCreateMetric: getOrCreateMetric,\n            getOrCreateCumulativeMetric: getOrCreateCumulativeMetric,\n            getOrCreateConvertedMetric: getOrCreateConvertedMetric,\n            getOrCreateCumulativeConvertedMetric: getOrCreateCumulativeConvertedMetric,\n            getOrCreateDerivedMetric: getOrCreateDerivedMetric,\n            destroyMetric: destroyMetric,\n            destroyDerivedMetric: destroyDerivedMetric,\n            clearMetricList: clearMetricList,\n            clearDerivedMetricList: clearDerivedMetricList,\n            getSimpleMetricList: getSimpleMetricList,\n            getDerivedMetricList: getDerivedMetricList\n        };\n    }\n\n    angular\n        .module('metriclist', [\n            'pmapi',\n            'metric'\n        ])\n        .factory('MetricListService', MetricListService);\n\n })();\n\n/**!\n *\n *  Copyright 2016 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n (function () {\n     'use strict';\n\n     /**\n     * @name ModalService\n     * @desc\n     */\n     function ModalService($uibModal) {\n\n        var defaultModal = {\n            backdrop: true,\n            keyboard: true,\n            modalFade: true,\n            template: '<div class=\"modal-header\"><h3>{{modalOptions.headerText}}</h3></div><div class=\"modal-body\"><p>{{modalOptions.bodyText}}</p></div><div class=\"modal-footer\"><button type=\"button\" class=\"btn\" data-ng-click=\"modalOptions.close()\">{{modalOptions.closeButtonText}}</button><button class=\"btn btn-primary\" data-ng-click=\"modalOptions.ok();\">{{modalOptions.actionButtonText}}</button></div>'\n        };\n\n        var defaultModalOptions = {\n            closeButtonText: 'Close',\n            actionButtonText: 'OK',\n            headerText: 'Proceed?',\n            bodyText: 'Perform this action?'\n        };\n\n        /**\n        * @name show\n        * @desc\n        */\n        function showModal(customModal, customModalOptions) {\n            //Create temp objects to work with since we're in a singleton service\n            var modal = {};\n            var modalOptions = {};\n\n            customModal.backdrop = 'static';\n\n            //Map angular-ui modal custom defaults to modal defaults defined in service\n            angular.extend(modal, defaultModal, customModal);\n\n            //Map modal.html $scope custom properties to defaults defined in service\n            angular.extend(modalOptions, defaultModalOptions, customModalOptions);\n\n            modal.controller = ['$scope','$uibModalInstance', function ($scope, $uibModalInstance) {\n                $scope.modalOptions = modalOptions;\n                $scope.modalOptions.ok = function (result) {\n                    $uibModalInstance.close(result);\n                };\n                $scope.modalOptions.close = function () {\n                    $uibModalInstance.dismiss('cancel');\n                };\n            }];\n\n            return $uibModal.open(modal).result;\n        }\n\n        return {\n            showModal: showModal\n        };\n\n    }\n\n    angular\n        .module('modal' , [])\n        .factory('ModalService', ModalService);\n\n })();\n\n/**!\n *\n *  Copyright 2016 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n(function() {\n  'use strict';\n\n  angular\n    .module('metric', [\n       'pmapi'\n    ]);\n\n})();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n /*global _*/\n\n (function () {\n     'use strict';\n\n    /**\n    * @name SimpleMetric\n    * @desc\n    */\n    function SimpleMetric($rootScope) {\n\n        var Metric = function (name) {\n            this.name = name || null;\n            this.data = [];\n            this.subscribers = 1;\n        };\n\n        Metric.prototype.toString = function () {\n            return this.name;\n        };\n\n        Metric.prototype.pushValue = function (timestamp, iid, iname, value) {\n            var self = this,\n                instance,\n                overflow;\n\n            instance = _.find(self.data, function (el) {\n                return el.iid === iid;\n            });\n\n            if (angular.isDefined(instance) && instance !== null) {\n                instance.values.push({ x: timestamp, y: value });\n                overflow = instance.values.length - ((parseInt($rootScope.properties.window) * 60) / parseInt($rootScope.properties.interval));\n                if (overflow > 0) {\n                    instance.values.splice(0, overflow);\n                }\n            } else {\n                instance = {\n                    key: angular.isDefined(iname) ? iname : this.name,\n                    iid: iid,\n                    values: [{x: timestamp, y: value}, {x: timestamp + 1, y: value}]\n                };\n                self.data.push(instance);\n            }\n        };\n\n        Metric.prototype.clearData = function () {\n            this.data.length = 0;\n        };\n\n        Metric.prototype.deleteInvalidInstances = function (currentInstances) {\n            var iid,\n                currentInstance,\n                index,\n                self = this;\n            angular.forEach(self.data, function(instance) {\n                currentInstance = _.find(currentInstances, function (el) {\n                    iid = angular.isUndefined(el.instance) ? 1 : el.instance;\n                    return iid === instance.iid;\n                });\n                if (angular.isUndefined(currentInstance)) {\n                    index = self.data.indexOf(instance);\n                    if (index > -1) {\n                        self.data.splice(index, 1);\n                    }\n                }\n            });\n        };\n\n        return Metric;\n    }\n\n    angular\n        .module('metric')\n        .factory('SimpleMetric', SimpleMetric);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n(function () {\n    'use strict';\n\n    /**\n    * @name MetricService\n    * @desc Provides Instances names\n    */\n    function MetricService($http, $rootScope, PMAPIService) {\n        return {\n            getInames: function (metric, iid) {\n                return PMAPIService.getInstanceDomainsByName($rootScope.properties.context, metric, [iid]);\n            }\n        };\n    }\n\n    angular\n      .module('metric')\n      .factory('MetricService', MetricService);\n})();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n /*global _*/\n\n (function () {\n     'use strict';\n\n    /**\n    * @name DerivedMetric\n    * @desc\n    */\n    function DerivedMetric($rootScope) {\n\n        var Metric = function (name, derivedFunction) {\n            this.name = name;\n            this.data = [];\n            this.subscribers = 1;\n            this.derivedFunction = derivedFunction;\n        };\n\n        Metric.prototype.updateValues = function () {\n            var self = this,\n                values;\n\n            values = self.derivedFunction(); // timestamp, key, data\n\n            if (values.length !== self.data.length) {\n                self.data.length = 0;\n            }\n\n            angular.forEach(values, function (data) {\n                var overflow,\n                    instance = _.find(self.data, function (el) {\n                        return el.key === data.key;\n                    });\n\n                if (angular.isUndefined(instance)) {\n                    instance = {\n                        key: data.key,\n                        values: [{x: data.timestamp, y: data.value}, {x: data.timestamp + 1, y: data.value}]\n                    };\n                    self.data.push(instance);\n                } else {\n                    instance.values.push({x: data.timestamp, y: data.value});\n                    overflow = instance.values.length - ((parseInt($rootScope.properties.window) * 60) / parseInt($rootScope.properties.interval));\n                    if (overflow > 0) {\n                        instance.values.splice(0, overflow);\n                    }\n                }\n            });\n        };\n\n        Metric.prototype.clearData = function () {\n            this.data.length = 0;\n        };\n\n        return Metric;\n    }\n\n    angular\n        .module('metric')\n        .factory('DerivedMetric', DerivedMetric);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n /*global _*/\n\n (function () {\n     'use strict';\n\n    /**\n    * @name CumulativeConvertedMetric\n    * @desc\n    */\n    function CumulativeConvertedMetric($rootScope, $log, SimpleMetric) {\n\n        var Metric = function (name, conversionFunction) {\n            this.base = Metric;\n            this.base(name);\n            this.conversionFunction = conversionFunction;\n        };\n\n        Metric.prototype = new SimpleMetric();\n\n        Metric.prototype.pushValue = function (timestamp, iid, iname, value) {\n            var self = this,\n                instance,\n                overflow,\n                diffValue,\n                convertedValue;\n\n            instance = _.find(self.data, function (el) {\n                return el.iid === iid;\n            });\n\n            if (angular.isUndefined(instance)) {\n                instance = {\n                    key: angular.isDefined(iname) ? iname : this.name,\n                    iid: iid,\n                    values: [],\n                    previousValue: value,\n                    previousTimestamp: timestamp\n                };\n                self.data.push(instance);\n            } else {\n                diffValue = ((value - instance.previousValue) / (timestamp - instance.previousTimestamp)); // sampling frequency\n                convertedValue = self.conversionFunction(diffValue);\n                instance.values.push({ x: timestamp, y: convertedValue });\n                instance.previousValue = value;\n                instance.previousTimestamp = timestamp;\n                overflow = instance.values.length - ((parseInt($rootScope.properties.window) * 60) / parseInt($rootScope.properties.interval));\n                if (overflow > 0) {\n                    instance.values.splice(0, overflow);\n                }\n            }\n        };\n\n        return Metric;\n    }\n\n    angular\n        .module('metric')\n        .factory('CumulativeConvertedMetric', CumulativeConvertedMetric);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n /*global _*/\n\n (function () {\n     'use strict';\n\n    /**\n    * @name CumulativeMetric\n    * @desc\n    */\n    function CumulativeMetric($rootScope, $log, SimpleMetric) {\n\n        var Metric = function (name) {\n            this.base = SimpleMetric;\n            this.base(name);\n        };\n\n        Metric.prototype = new SimpleMetric();\n\n        Metric.prototype.pushValue = function (timestamp, iid, iname, value) {\n            var self = this,\n                instance,\n                overflow,\n                diffValue;\n\n            instance = _.find(self.data, function (el) {\n                return el.iid === iid;\n            });\n\n            if (angular.isUndefined(instance)) {\n                instance = {\n                    key: angular.isDefined(iname) ? iname : this.name,\n                    iid: iid,\n                    values: [],\n                    previousValue: value,\n                    previousTimestamp: timestamp\n                };\n                self.data.push(instance);\n            } else {\n                diffValue = ((value - instance.previousValue) / ((timestamp - instance.previousTimestamp) / 1000)); // sampling frequency\n                if (instance.values.length < 1) {\n                  instance.values.push({ x: timestamp, y: diffValue }, { x: timestamp + 1, y: diffValue });\n                } else {\n                    instance.values.push({ x: timestamp, y: diffValue });\n                }\n                instance.previousValue = value;\n                instance.previousTimestamp = timestamp;\n                overflow = instance.values.length - ((parseInt($rootScope.properties.window) * 60) / parseInt($rootScope.properties.interval));\n                if (overflow > 0) {\n                    instance.values.splice(0, overflow);\n                }\n            }\n        };\n\n        return Metric;\n    }\n\n    angular\n        .module('metric')\n        .factory('CumulativeMetric', CumulativeMetric);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n /*global _*/\n\n (function () {\n     'use strict';\n\n    /**\n    * @name ConvertedMetric\n    * @desc\n    */\n    function ConvertedMetric($rootScope, $log, SimpleMetric) {\n\n        var Metric = function (name, conversionFunction) {\n            this.base = SimpleMetric;\n            this.base(name);\n            this.conversionFunction = conversionFunction;\n        };\n\n        Metric.prototype = new SimpleMetric();\n\n        Metric.prototype.pushValue = function (timestamp, iid, iname, value) {\n            var self = this,\n                instance,\n                overflow,\n                convertedValue;\n\n            convertedValue = self.conversionFunction(value);\n\n            instance = _.find(self.data, function (el) {\n                return el.iid === iid;\n            });\n\n            if (angular.isDefined(instance) && instance !== null) {\n                instance.values.push({ x: timestamp, y: convertedValue });\n                overflow = instance.values.length - ((parseInt($rootScope.properties.window) * 60) / parseInt($rootScope.properties.interval));\n                if (overflow > 0) {\n                    instance.values.splice(0, overflow);\n                }\n            } else {\n                instance = {\n                    key: angular.isDefined(iname) ? iname : this.name,\n                    iid: iid,\n                    values: [{x: timestamp, y: convertedValue}, {x: timestamp + 1, y: convertedValue}]\n                };\n                self.data.push(instance);\n            }\n        };\n\n        return Metric;\n    }\n\n    angular\n        .module('metric')\n        .factory('ConvertedMetric', ConvertedMetric);\n })();\n\n/**!\n *\n *  Copyright 2016 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n(function() {\n  'use strict';\n\n  angular\n    .module('flamegraph', [\n       'dashboard'\n    ]);\n\n})();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n (function () {\n     'use strict';\n\n     /**\n     * @name FlameGraphService\n     */\n     function FlameGraphService($log, $rootScope, $http, toastr) {\n\n        /**\n        * @name generate\n        * @desc\n        */\n        function generate() {\n            $http.get($rootScope.properties.protocol + '://' + $rootScope.properties.host + ':' + $rootScope.properties.port + '/pmapi/' + $rootScope.properties.context + '/_fetch?names=generic.systack')\n                .success(function () {\n                    toastr.success('generic.systack requested.', 'Success');\n                }).error(function () {\n                    toastr.error('Failed requesting generic.systack.', 'Error');\n                });\n        }\n\n        return {\n            generate: generate\n        };\n    }\n\n    angular\n        .module('flamegraph')\n        .factory('FlameGraphService', FlameGraphService);\n\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n(function () {\n    'use strict';\n\n    function cpuFlameGraph($rootScope, $timeout, FlameGraphService, DashboardService) {\n\n        function link(scope) {\n            scope.host = $rootScope.properties.host;\n            scope.port = $rootScope.properties.port;\n            scope.context = $rootScope.properties.context;\n            scope.ready = false;\n            scope.processing = false;\n            scope.id = DashboardService.getGuid();\n            scope.generateFlameGraph = function(){\n                FlameGraphService.generate();\n                scope.ready = true;\n                scope.processing = true;\n                $timeout(function () {\n                    scope.processing = false;\n                }, 65000);\n            };\n        }\n\n        return {\n            restrict: 'A',\n            templateUrl: 'app/components/flamegraph/flamegraph.html',\n            link: link\n        };\n    }\n\n    angular\n        .module('flamegraph')\n        .directive('cpuFlameGraph', cpuFlameGraph);\n\n})();\n\n/**!\n *\n *  Copyright 2016 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n(function() {\n  'use strict';\n\n  angular\n    .module('datamodel', [\n       'containermetadata',\n       'dashboard',\n       'metriclist'\n    ]);\n\n})();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n (function () {\n     'use strict';\n\n    /**\n    * @name SimpleMetricDataModel\n    * @desc\n    */\n    function SimpleMetricDataModel(WidgetDataModel, MetricListService, DashboardService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n\n            this.name = this.dataModelOptions ? this.dataModelOptions.name : 'metric_' + DashboardService.getGuid();\n\n            this.metric = MetricListService.getOrCreateMetric(this.name);\n\n            this.updateScope(this.metric.data);\n\n        };\n\n        DataModel.prototype.destroy = function () {\n            MetricListService.destroyMetric(this.name);\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('MetricDataModel', SimpleMetricDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n /*global _*/\n\n (function () {\n     'use strict';\n\n    /**\n    * @name PerCpuUtilizationMetricDataModel\n    * @desc\n    */\n    function PerCpuUtilizationMetricDataModel(WidgetDataModel, MetricListService, DashboardService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n\n            this.name = this.dataModelOptions ? this.dataModelOptions.name : 'metric_' + DashboardService.getGuid();\n\n            var cpuSysMetric = MetricListService.getOrCreateCumulativeMetric('kernel.percpu.cpu.sys'),\n                cpuUserMetric = MetricListService.getOrCreateCumulativeMetric('kernel.percpu.cpu.user'),\n                derivedFunction;\n\n            derivedFunction = function () {\n                var returnValues = [],\n                    cpuUserInstance,\n                    cpuSysLastValue,\n                    cpuUserLastValue;\n\n                angular.forEach(cpuSysMetric.data, function (cpuSysInstance) {\n                    if (cpuSysInstance.values.length > 0) {\n                        cpuUserInstance = _.find(cpuUserMetric.data, function (el) {\n                            return el.key === cpuSysInstance.key;\n                        });\n                        if (angular.isDefined(cpuUserInstance)) {\n                            cpuSysLastValue = cpuSysInstance.values[cpuSysInstance.values.length - 1];\n                            cpuUserLastValue = cpuUserInstance.values[cpuUserInstance.values.length - 1];\n                            if (cpuSysLastValue.x === cpuUserLastValue.x) {\n                                returnValues.push({\n                                    timestamp: cpuSysLastValue.x,\n                                    key: cpuSysInstance.key,\n                                    value: (cpuSysLastValue.y + cpuUserLastValue.y) / 1000\n                                });\n                            }\n                        }\n                    }\n                });\n\n                return returnValues;\n            };\n\n            // create derived metric\n            this.metric = MetricListService.getOrCreateDerivedMetric(this.name, derivedFunction);\n\n            this.updateScope(this.metric.data);\n        };\n\n        DataModel.prototype.destroy = function () {\n            // remove subscribers and delete derived metric\n            MetricListService.destroyDerivedMetric(this.name);\n\n            // remove subscribers and delete base metrics\n            MetricListService.destroyMetric('kernel.percpu.cpu.sys');\n            MetricListService.destroyMetric('kernel.percpu.cpu.user');\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('PerCpuUtilizationMetricDataModel', PerCpuUtilizationMetricDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n (function () {\n     'use strict';\n\n    /**\n    * @name NetworkBytesMetricDataModel\n    * @desc\n    */\n    function NetworkBytesMetricDataModel(WidgetDataModel, MetricListService, DashboardService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n\n            this.name = this.dataModelOptions ? this.dataModelOptions.name : 'metric_' + DashboardService.getGuid();\n\n            var widgetDefinition = this;\n            // create create base metrics\n            var inMetric = MetricListService.getOrCreateCumulativeMetric('network.interface.in.bytes'),\n                outMetric = MetricListService.getOrCreateCumulativeMetric('network.interface.out.bytes'),\n                derivedFunction;\n\n            // create derived function\n            derivedFunction = function () {\n                var returnValues = [],\n                    lastValue;\n\n                var pushReturnValues = function(instance, metricName) {\n                    if (instance.values.length > 0 && instance.key.indexOf(widgetDefinition.widgetScope.widget.filter) !==-1) {\n                        lastValue = instance.values[instance.values.length - 1];\n                        returnValues.push({\n                            timestamp: lastValue.x,\n                            key: instance.key + metricName,\n                            value: lastValue.y / 1024\n                        });\n                    }\n                };\n\n                angular.forEach(inMetric.data, function (instance) {\n                    pushReturnValues(instance, ' in');\n                });\n\n                angular.forEach(outMetric.data, function (instance) {\n                    pushReturnValues(instance, ' out');\n                });\n\n                return returnValues;\n            };\n\n            // create derived metric\n            this.metric = MetricListService.getOrCreateDerivedMetric(this.name, derivedFunction);\n\n            this.updateScope(this.metric.data);\n        };\n\n        DataModel.prototype.destroy = function () {\n            // remove subscribers and delete derived metric\n            MetricListService.destroyDerivedMetric(this.name);\n\n            // remove subscribers and delete base metrics\n            MetricListService.destroyMetric('network.interface.in.bytes');\n            MetricListService.destroyMetric('network.interface.out.bytes');\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('NetworkBytesMetricDataModel', NetworkBytesMetricDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n (function () {\n     'use strict';\n\n    /**\n    * @name MultipleMetricDataModel\n    * @desc\n    */\n    function MultipleMetricDataModel(WidgetDataModel, MetricListService, DashboardService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n\n            this.name = this.dataModelOptions ? this.dataModelOptions.name : 'metric_' + DashboardService.getGuid();\n\n            this.metricDefinitions = this.dataModelOptions.metricDefinitions;\n\n            var derivedFunction,\n                metrics = {};\n\n            angular.forEach(this.metricDefinitions, function (definition, key) {\n                metrics[key] = MetricListService.getOrCreateMetric(definition);\n            });\n\n            derivedFunction = function () {\n                var returnValues = [],\n                    lastValue;\n\n                angular.forEach(metrics, function (metric, key) {\n                    angular.forEach(metric.data, function (instance) {\n                        if (instance.values.length > 0) {\n                            lastValue = instance.values[instance.values.length - 1];\n                            returnValues.push({\n                                timestamp: lastValue.x,\n                                key: key.replace('{key}', instance.key),\n                                value: lastValue.y\n                            });\n                        }\n                    });\n                });\n\n                return returnValues;\n            };\n\n            // create derived metric\n            this.metric = MetricListService.getOrCreateDerivedMetric(this.name, derivedFunction);\n\n            this.updateScope(this.metric.data);\n        };\n\n        DataModel.prototype.destroy = function () {\n            // remove subscribers and delete derived metric\n            MetricListService.destroyDerivedMetric(this.name);\n\n            // remove subscribers and delete base metrics\n            angular.forEach(this.metricDefinitions, function (definition) {\n                MetricListService.destroyMetric(definition);\n            });\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('MultipleMetricDataModel', MultipleMetricDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n (function () {\n     'use strict';\n\n    /**\n    * @name MultipleCumulativeMetricDataModel\n    * @desc\n    */\n    function MultipleCumulativeMetricDataModel(WidgetDataModel, MetricListService, DashboardService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n\n            this.name = this.dataModelOptions ? this.dataModelOptions.name : 'metric_' + DashboardService.getGuid();\n\n            this.metricDefinitions = this.dataModelOptions.metricDefinitions;\n\n\n            var widgetDefinition = this,\n                metrics = {},\n                derivedFunction;\n\n            angular.forEach(this.metricDefinitions, function (definition, key) {\n                metrics[key] = MetricListService.getOrCreateCumulativeMetric(definition);\n            });\n\n            derivedFunction = function () {\n                var returnValues = [],\n                    lastValue;\n\n                angular.forEach(metrics, function (metric, key) {\n                    angular.forEach(metric.data, function (instance) {\n                        if (instance.values.length > 0  && ( angular.isUndefined(widgetDefinition.widgetScope.widget.filter) || instance.key.indexOf(widgetDefinition.widgetScope.widget.filter) !==-1)) {\n                            lastValue = instance.values[instance.values.length - 1];\n                            returnValues.push({\n                                timestamp: lastValue.x,\n                                key: key.replace('{key}', instance.key),\n                                value: lastValue.y\n                            });\n                        }\n                    });\n                });\n\n                return returnValues;\n            };\n\n            // create derived metric\n            this.metric = MetricListService.getOrCreateDerivedMetric(this.name, derivedFunction);\n\n            this.updateScope(this.metric.data);\n        };\n\n        DataModel.prototype.destroy = function () {\n            // remove subscribers and delete derived metric\n            MetricListService.destroyDerivedMetric(this.name);\n\n            // remove subscribers and delete base metrics\n            angular.forEach(this.metricDefinitions, function (definition) {\n                MetricListService.destroyMetric(definition);\n            });\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('MultipleCumulativeMetricDataModel', MultipleCumulativeMetricDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n (function () {\n     'use strict';\n\n    /**\n    * @name MemoryUtilizationMetricDataModel\n    * @desc\n    */\n    function MemoryUtilizationMetricDataModel(WidgetDataModel, MetricListService, DashboardService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n\n            this.name = this.dataModelOptions ? this.dataModelOptions.name : 'metric_' + DashboardService.getGuid();\n\n            var conversionFunction = function (value) {\n                    return value / 1024;\n                },\n                cachedMemMetric = MetricListService.getOrCreateConvertedMetric('mem.util.cached', conversionFunction),\n                usedMemMetric = MetricListService.getOrCreateConvertedMetric('mem.util.used', conversionFunction),\n                freeMemMetric = MetricListService.getOrCreateConvertedMetric('mem.util.free', conversionFunction),\n                buffersMemMetric = MetricListService.getOrCreateConvertedMetric('mem.util.bufmem', conversionFunction),\n                derivedFunction;\n\n            derivedFunction = function () {\n                var returnValues = [],\n                    usedValue,\n                    cachedValue,\n                    freeValue,\n                    buffersValue;\n\n\n                usedValue = (function () {\n                    if (usedMemMetric.data.length > 0) {\n                        var instance = usedMemMetric.data[usedMemMetric.data.length - 1];\n                        if (instance.values.length > 0) {\n                            return instance.values[instance.values.length - 1];\n                        }\n                    }\n                }());\n\n                cachedValue = (function () {\n                    if (cachedMemMetric.data.length > 0) {\n                        var instance = cachedMemMetric.data[cachedMemMetric.data.length - 1];\n                        if (instance.values.length > 0) {\n                            return instance.values[instance.values.length - 1];\n                        }\n                    }\n                }());\n\n                freeValue = (function () {\n                    if (freeMemMetric.data.length > 0) {\n                        var instance = freeMemMetric.data[freeMemMetric.data.length - 1];\n                        if (instance.values.length > 0) {\n                            return instance.values[instance.values.length - 1];\n                        }\n                    }\n                }());\n\n                buffersValue = (function () {\n                    if (buffersMemMetric.data.length > 0) {\n                        var instance = buffersMemMetric.data[buffersMemMetric.data.length - 1];\n                        if (instance.values.length > 0) {\n                            return instance.values[instance.values.length - 1];\n                        }\n                    }\n                }());\n\n                if (angular.isDefined(usedValue) &&\n                    angular.isDefined(cachedValue) &&\n                    angular.isDefined(buffersValue)) {\n\n                    returnValues.push({\n                        timestamp: usedValue.x,\n                        key: 'application',\n                        value: usedValue.y - cachedValue.y - buffersValue.y\n                    });\n                }\n\n                if (angular.isDefined(cachedValue) &&\n                    angular.isDefined(buffersValue)) {\n\n                    returnValues.push({\n                        timestamp: usedValue.x,\n                        key: 'free (cache)',\n                        value: cachedValue.y + buffersValue.y\n                    });\n                }\n\n                if (angular.isDefined(freeValue)) {\n\n                    returnValues.push({\n                        timestamp: usedValue.x,\n                        key: 'free (unused)',\n                        value: freeValue.y\n                    });\n                }\n\n                return returnValues;\n            };\n\n            // create derived metric\n            this.metric = MetricListService.getOrCreateDerivedMetric(this.name, derivedFunction);\n\n            this.updateScope(this.metric.data);\n        };\n\n        DataModel.prototype.destroy = function () {\n            // remove subscribers and delete derived metric\n            MetricListService.destroyDerivedMetric(this.name);\n\n            // remove subscribers and delete base metrics\n            MetricListService.destroyMetric('mem.util.cached');\n            MetricListService.destroyMetric('mem.util.used');\n            MetricListService.destroyMetric('mem.util.free');\n            MetricListService.destroyMetric('mem.util.bufmem');\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('MemoryUtilizationMetricDataModel', MemoryUtilizationMetricDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n (function () {\n     'use strict';\n\n    /**\n    * @name DummyMetricDataModel\n    * @desc\n    */\n    function DummyMetricDataModel(WidgetDataModel, MetricListService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n\n            this.metric = MetricListService.getOrCreateMetric('kernel.uname.release');\n        };\n\n        DataModel.prototype.destroy = function () {\n            MetricListService.destroyMetric('kernel.uname.release');\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('DummyMetricDataModel', DummyMetricDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n /*global _*/\n\n (function () {\n     'use strict';\n\n    /**\n    * @name DiskLatencyMetricDataModel\n    * @desc\n    */\n    function DiskLatencyMetricDataModel(WidgetDataModel, MetricListService, DashboardService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n\n            this.name = this.dataModelOptions ? this.dataModelOptions.name : 'metric_' + DashboardService.getGuid();\n\n            var readActiveMetric = MetricListService.getOrCreateCumulativeMetric('disk.dev.read_rawactive'),\n                writeActiveMetric = MetricListService.getOrCreateCumulativeMetric('disk.dev.write_rawactive'),\n                readMetric = MetricListService.getOrCreateCumulativeMetric('disk.dev.read'),\n                writeMetric = MetricListService.getOrCreateCumulativeMetric('disk.dev.write'),\n                derivedFunction;\n\n            derivedFunction = function () {\n                var returnValues = [],\n                    rawactiveInstance,\n                    lastValue,\n                    rawactiveLastValue,\n                    value;\n\n                function calculateValues(metric, rawactiveMetric, key, outputArr) {\n                    if (metric.data.length > 0) {\n                        angular.forEach(metric.data, function (instance) {\n                            rawactiveInstance = _.find(rawactiveMetric.data, function (element) {\n                                return element.key === instance.key;\n                            });\n                            if (angular.isDefined(rawactiveInstance)) {\n                                if (instance.values.length > 0) {\n                                    if (rawactiveInstance.values.length > 0) {\n                                        lastValue = instance.values[instance.values.length - 1];\n                                        rawactiveLastValue = rawactiveInstance.values[instance.values.length - 1];\n                                        if (lastValue.y > 0) {\n                                            value = rawactiveLastValue.y / lastValue.y;\n                                        } else {\n                                            value = 0;\n                                        }\n                                        outputArr.push({\n                                            timestamp: lastValue.x,\n                                            key: instance.key + key,\n                                            value: value\n                                        });\n                                    }\n                                }\n                            }\n                        });\n                    }\n                }\n\n                calculateValues(readMetric, readActiveMetric, ' read latency', returnValues);\n                calculateValues(writeMetric, writeActiveMetric, ' write latency', returnValues);\n\n                return returnValues;\n            };\n\n            // create derived metric\n            this.metric = MetricListService.getOrCreateDerivedMetric(this.name, derivedFunction);\n\n            this.updateScope(this.metric.data);\n        };\n\n        DataModel.prototype.destroy = function () {\n            // remove subscribers and delete derived metric\n            MetricListService.destroyDerivedMetric(this.name);\n\n            // remove subscribers and delete base metrics\n            MetricListService.destroyMetric('disk.dev.read_rawactive');\n            MetricListService.destroyMetric('disk.dev.write_rawactive');\n            MetricListService.destroyMetric('disk.dev.read');\n            MetricListService.destroyMetric('disk.dev.write');\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('DiskLatencyMetricDataModel', DiskLatencyMetricDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n (function () {\n     'use strict';\n\n    /**\n    * @name CumulativeUtilizationMetricDataModel\n    * @desc\n    */\n    function CumulativeUtilizationMetricDataModel(WidgetDataModel, MetricListService, DashboardService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n\n            this.name = this.dataModelOptions ? this.dataModelOptions.name : 'metric_' + DashboardService.getGuid();\n\n            var rawMetric = MetricListService.getOrCreateCumulativeMetric(this.name),\n                derivedFunction;\n\n            derivedFunction = function () {\n                var returnValues = [],\n                    lastValue;\n\n                angular.forEach(rawMetric.data, function (instance) {\n                    if (instance.values.length > 0) {\n                        lastValue = instance.values[instance.values.length - 1];\n                        returnValues.push({\n                            timestamp: lastValue.x,\n                            key: instance.key,\n                            value: lastValue.y / 1000\n                        });\n                    }\n                });\n\n                return returnValues;\n            };\n\n            // create derived metric\n            this.metric = MetricListService.getOrCreateDerivedMetric(this.name, derivedFunction);\n\n            this.updateScope(this.metric.data);\n\n        };\n\n        DataModel.prototype.destroy = function () {\n            // remove subscribers and delete derived metric\n            MetricListService.destroyDerivedMetric(this.name);\n\n            // remove subscribers and delete base metrics\n            MetricListService.destroyMetric(this.name);\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('CumulativeUtilizationMetricDataModel', CumulativeUtilizationMetricDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n (function () {\n     'use strict';\n\n    /**\n    * @name CumulativeMetricDataModel\n    * @desc\n    */\n    function CumulativeMetricDataModel(WidgetDataModel, MetricListService, DashboardService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n\n            this.name = this.dataModelOptions ? this.dataModelOptions.name : 'metric_' + DashboardService.getGuid();\n\n            this.metric = MetricListService.getOrCreateCumulativeMetric(this.name);\n\n            this.updateScope(this.metric.data);\n\n        };\n\n        DataModel.prototype.destroy = function () {\n            MetricListService.destroyMetric(this.name);\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('CumulativeMetricDataModel', CumulativeMetricDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n (function () {\n     'use strict';\n\n    /**\n    * @name CpuUtilizationMetricDataModel\n    * @desc\n    */\n    function CpuUtilizationMetricDataModel(WidgetDataModel, MetricListService, DashboardService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n\n            this.name = this.dataModelOptions ? this.dataModelOptions.name : 'metric_' + DashboardService.getGuid();\n\n            // create create base metrics\n            var cpuSysMetric = MetricListService.getOrCreateCumulativeMetric('kernel.all.cpu.sys'),\n                cpuUserMetric = MetricListService.getOrCreateCumulativeMetric('kernel.all.cpu.user'),\n                ncpuMetric = MetricListService.getOrCreateMetric('hinv.ncpu'),\n                derivedFunction;\n\n            derivedFunction = function () {\n                var returnValues = [],\n                    cpuInstance,\n                    cpuCount;\n\n                if (ncpuMetric.data.length > 0) {\n                    cpuInstance = ncpuMetric.data[ncpuMetric.data.length - 1];\n\n                    if (cpuInstance.values.length > 0) {\n                        cpuCount = cpuInstance.values[cpuInstance.values.length - 1].y;\n\n                        var pushReturnValues = function(instance, keyName) {\n                            if (instance.values.length > 0) {\n                                var lastValue = instance.values[instance.values.length - 1];\n                                returnValues.push({\n                                    timestamp: lastValue.x,\n                                    key: keyName,\n                                    value: lastValue.y / (cpuCount * 1000)\n                                });\n                            }\n                        };\n\n                        angular.forEach(cpuSysMetric.data, function (instance) {\n                            pushReturnValues(instance, 'sys');\n                        });\n\n                        angular.forEach(cpuUserMetric.data, function (instance) {\n                            pushReturnValues(instance, 'user');\n                        });\n                    }\n                }\n\n                return returnValues;\n            };\n\n            // create derived metric\n            this.metric = MetricListService.getOrCreateDerivedMetric(this.name, derivedFunction);\n\n            this.updateScope(this.metric.data);\n        };\n\n        DataModel.prototype.destroy = function () {\n            // remove subscribers and delete derived metric\n            MetricListService.destroyDerivedMetric(this.name);\n\n            // remove subscribers and delete base metrics\n            MetricListService.destroyMetric('kernel.all.cpu.sys');\n            MetricListService.destroyMetric('kernel.all.cpu.user');\n            MetricListService.destroyMetric('hinv.ncpu');\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('CpuUtilizationMetricDataModel', CpuUtilizationMetricDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n (function () {\n     'use strict';\n\n    /**\n    * @name SimpleMetricDataModel\n    * @desc\n    */\n    function ConvertedMetricDataModel(WidgetDataModel, MetricListService, DashboardService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n\n            this.name = this.dataModelOptions ? this.dataModelOptions.name : 'metric_' + DashboardService.getGuid();\n\n\n            this.conversionFunction = this.dataModelOptions.conversionFunction;\n\n            this.metric = MetricListService.getOrCreateConvertedMetric(this.name, this.conversionFunction);\n\n            this.updateScope(this.metric.data);\n\n        };\n\n        DataModel.prototype.destroy = function () {\n            MetricListService.destroyMetric(this.name);\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('ConvertedMetricDataModel', ConvertedMetricDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n (function () {\n     'use strict';\n\n    /**\n    * @name ContainerNetworkBytesMetricDataModel\n    * @desc\n    */\n    function ContainerNetworkBytesMetricDataModel(WidgetDataModel, MetricListService, DashboardService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n\n            this.name = this.dataModelOptions ? this.dataModelOptions.name : 'metric_' + DashboardService.getGuid();\n\n            var widgetDefinition = this;\n            // create create base metrics\n            var inMetric = MetricListService.getOrCreateCumulativeMetric('network.interface.in.bytes'),\n                outMetric = MetricListService.getOrCreateCumulativeMetric('network.interface.out.bytes'),\n                derivedFunction;\n\n            // create derived function\n            derivedFunction = function () {\n                var returnValues = [],\n                    lastValue;\n\n                angular.forEach(inMetric.data, function (instance) {\n                    if (instance.values.length > 0 && instance.key.indexOf('veth') !== -1 && instance.key.indexOf(widgetDefinition.widgetScope.widget.filter) !==-1) {\n                        lastValue = instance.values[instance.values.length - 1];\n                        returnValues.push({\n                            timestamp: lastValue.x,\n                            key: instance.key + ' in',\n                            value: lastValue.y / 1024\n                        });\n                    }\n                });\n\n                angular.forEach(outMetric.data, function (instance) {\n                    if (instance.values.length > 0 && instance.key.indexOf('veth') !==- 1 && instance.key.indexOf(widgetDefinition.widgetScope.widget.filter) !==-1) {\n                        lastValue = instance.values[instance.values.length - 1];\n                        returnValues.push({\n                            timestamp: lastValue.x,\n                            key: instance.key + ' out',\n                            value: lastValue.y / 1024\n                        });\n                    }\n                });\n\n                return returnValues;\n            };\n\n            // create derived metric\n            this.metric = MetricListService.getOrCreateDerivedMetric('container.network.interface', derivedFunction);\n\n            this.updateScope(this.metric.data);\n        };\n\n        DataModel.prototype.destroy = function () {\n            // remove subscribers and delete derived metric\n            MetricListService.destroyDerivedMetric('container.network.interface');\n\n            // remove subscribers and delete base metrics\n            MetricListService.destroyMetric('network.interface.in.bytes');\n            MetricListService.destroyMetric('network.interface.out.bytes');\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('ContainerNetworkBytesMetricDataModel', ContainerNetworkBytesMetricDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n (function () {\n     'use strict';\n\n    /**\n    * @name ContainerMultipleMetricDataModel\n    * @desc\n    */\n    function ContainerMultipleMetricDataModel(WidgetDataModel, MetricListService, DashboardService, ContainerMetadataService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n\n            this.name = this.dataModelOptions ? this.dataModelOptions.name : 'metric_' + DashboardService.getGuid();\n\n            this.metricDefinitions = this.dataModelOptions.metricDefinitions;\n\n            var derivedFunction,\n                metrics = {};\n\n            angular.forEach(this.metricDefinitions, function (definition, key) {\n                metrics[key] = MetricListService.getOrCreateMetric(definition);\n            });\n\n            derivedFunction = function () {\n                var returnValues = [],\n                    lastValue,\n                    name;\n\n                angular.forEach(metrics, function (metric, key) {\n                    angular.forEach(metric.data, function (instance) {\n\n                        if (ContainerMetadataService.containerIdExist(instance.key)) {\n                            name = ContainerMetadataService.idDictionary(instance.key) || instance.key;\n                            if (instance.values.length > 0 && ContainerMetadataService.checkContainerName(name) && ContainerMetadataService.checkContainerFilter(name)) {\n                                lastValue = instance.values[instance.values.length - 1];\n                                returnValues.push({\n                                    timestamp: lastValue.x,\n                                    key: key.replace('{key}', name),\n                                    value: lastValue.y\n                                });\n                            }\n                        }\n                    });\n                });\n\n                return returnValues;\n            };\n\n            // create derived metric\n            this.metric = MetricListService.getOrCreateDerivedMetric(this.name, derivedFunction);\n\n            this.updateScope(this.metric.data);\n        };\n\n        DataModel.prototype.destroy = function () {\n            // remove subscribers and delete derived metric\n            MetricListService.destroyDerivedMetric(this.name);\n\n            // remove subscribers and delete base metrics\n            angular.forEach(this.metricDefinitions, function (definition) {\n                MetricListService.destroyMetric(definition);\n            });\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('ContainerMultipleMetricDataModel', ContainerMultipleMetricDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n (function () {\n     'use strict';\n\n    /**\n    * @name ContainerMultipleCumulativeMetricDataModel\n    * @desc\n    */\n    function ContainerMultipleCumulativeMetricDataModel(WidgetDataModel, MetricListService, DashboardService, ContainerMetadataService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n\n            this.name = this.dataModelOptions ? this.dataModelOptions.name : 'metric_' + DashboardService.getGuid();\n\n            this.metricDefinitions = this.dataModelOptions.metricDefinitions;\n\n            var derivedFunction,\n                metrics = {};\n\n            angular.forEach(this.metricDefinitions, function (definition, key) {\n                metrics[key] = MetricListService.getOrCreateCumulativeMetric(definition);\n            });\n\n            derivedFunction = function () {\n                var returnValues = [],\n                    lastValue,\n                    name;\n\n                angular.forEach(metrics, function (metric, key) {\n                    angular.forEach(metric.data, function (instance) {\n\n                        if (ContainerMetadataService.containerIdExist(instance.key)) {\n                            name = ContainerMetadataService.idDictionary(instance.key) || instance.key;\n                            if (instance.values.length > 0 && ContainerMetadataService.checkContainerName(name) && ContainerMetadataService.checkContainerFilter(name)) {\n                                lastValue = instance.values[instance.values.length - 1];\n                                returnValues.push({\n                                    timestamp: lastValue.x,\n                                    key: key.replace('{key}', name),\n                                    value: lastValue.y\n                                });\n                            }\n                        }\n                    });\n                });\n\n                return returnValues;\n            };\n\n            // create derived metric\n            this.metric = MetricListService.getOrCreateDerivedMetric(this.name, derivedFunction);\n\n            this.updateScope(this.metric.data);\n        };\n\n        DataModel.prototype.destroy = function () {\n            // remove subscribers and delete derived metric\n            MetricListService.destroyDerivedMetric(this.name);\n\n            // remove subscribers and delete base metrics\n            angular.forEach(this.metricDefinitions, function (definition) {\n                MetricListService.destroyMetric(definition);\n            });\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('ContainerMultipleCumulativeMetricDataModel', ContainerMultipleCumulativeMetricDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n (function () {\n     'use strict';\n\n    /**\n    * @name ContainerMemoryUsageMetricDataModel\n    * @desc\n    */\n    function ContainerMemoryUsageMetricDataModel(WidgetDataModel, MetricListService, DashboardService, ContainerMetadataService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n\n            this.name = this.dataModelOptions ? this.dataModelOptions.name : 'metric_' + DashboardService.getGuid();\n\n            var cgroupConversionFunction = function (value) {\n                    return value / 1024 / 1024;\n                },\n                memConversionFunction = function (value) {\n                    return value / 1024;\n                },\n                usedMemMetric = MetricListService.getOrCreateConvertedMetric('mem.util.used', memConversionFunction),\n                freeMemMetric = MetricListService.getOrCreateConvertedMetric('mem.util.free', memConversionFunction),\n                containerMemMetric = MetricListService.getOrCreateConvertedMetric('cgroup.memory.usage', cgroupConversionFunction),\n                derivedFunction;\n\n            derivedFunction = function () {\n                var returnValues = [],\n                    usedValue,\n                    freeValue,\n                    containerValue;\n\n\n                usedValue = (function () {\n                    if (usedMemMetric.data.length > 0) {\n                        var instance = usedMemMetric.data[usedMemMetric.data.length - 1];\n                        if (instance.values.length > 0) {\n                            return instance.values[instance.values.length - 1];\n                        }\n                    }\n                }());\n\n                freeValue = (function () {\n                    if (freeMemMetric.data.length > 0) {\n                        var instance = freeMemMetric.data[freeMemMetric.data.length - 1];\n                        if (instance.values.length > 0) {\n                            return instance.values[instance.values.length - 1];\n                        }\n                    }\n                }());\n\n                containerValue = (function () {\n                    if (containerMemMetric.data.length > 0) {\n                        var total = 0;\n                        var timestamp = containerMemMetric.data[containerMemMetric.data.length - 1].values[containerMemMetric.data[containerMemMetric.data.length - 1].values.length - 1].x;\n                        angular.forEach(containerMemMetric.data, function (instance) {\n                            if (instance.values.length > 0 && ContainerMetadataService.containerIdExist(instance.key)) {\n                                total = total + instance.values[instance.values.length - 1].y;\n                            }\n                        });\n                        return {\n                            x: timestamp,\n                            y: total\n                        };\n                    }\n                }());\n\n                if (angular.isDefined(usedValue) &&\n                    angular.isDefined(containerValue)) {\n\n                    returnValues.push({\n                        timestamp: usedValue.x,\n                        key: 'host used',\n                        value: usedValue.y - containerValue.y\n                    });\n\n                }\n\n                if (angular.isDefined(freeValue)) {\n\n                    returnValues.push({\n                        timestamp: freeValue.x,\n                        key: 'free (unused)',\n                        value: freeValue.y\n                    });\n                }\n\n                if (angular.isDefined(containerValue) &&\n                    angular.isDefined(usedValue)) {\n                    returnValues.push({\n                        timestamp: containerValue.x,\n                        key: 'container used',\n                        value: containerValue.y\n                    });\n                }\n\n                return returnValues;\n            };\n\n            // create derived metric\n            this.metric = MetricListService.getOrCreateDerivedMetric(this.name, derivedFunction);\n\n            this.updateScope(this.metric.data);\n        };\n\n        DataModel.prototype.destroy = function () {\n            // remove subscribers and delete derived metric\n            MetricListService.destroyDerivedMetric(this.name);\n\n            // remove subscribers and delete base metrics\n            MetricListService.destroyMetric('mem.util.used');\n            MetricListService.destroyMetric('mem.util.free');\n            MetricListService.destroyMetric('cgroup.memory.usage');\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('ContainerMemoryUsageMetricDataModel', ContainerMemoryUsageMetricDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n/* global _*/\n (function () {\n     'use strict';\n\n    /**\n    * @name CgroupMemoryUtilizationMetricDataModel\n    * @desc\n    */\n    function CgroupMemoryUtilizationMetricDataModel(WidgetDataModel, MetricListService, DashboardService, ContainerMetadataService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n\n            this.name = this.dataModelOptions ? this.dataModelOptions.name : 'metric_' + DashboardService.getGuid();\n\n            // create create base metrics\n            var conversionFunction = function (value) {\n                    return value / 1024 / 1024;\n                },\n                physmemConversionFunction = function (value) {\n                    return value / 1024;\n                },\n                usageMetric = MetricListService.getOrCreateConvertedMetric('cgroup.memory.usage', conversionFunction),\n                limitMetric = MetricListService.getOrCreateConvertedMetric('cgroup.memory.limit', conversionFunction),\n                physmemMetric = MetricListService.getOrCreateConvertedMetric('mem.physmem', physmemConversionFunction),\n                derivedFunction;\n\n            // create derived function\n            derivedFunction = function () {\n                var returnValues = [],\n                    lastPhysmemValue;\n\n                lastPhysmemValue = (function () {\n                    if (physmemMetric.data.length > 0) {\n                        var instance = physmemMetric.data[physmemMetric.data.length - 1];\n                        if (instance.values.length > 0) {\n                            return instance.values[instance.values.length - 1];\n                        }\n                    }\n                }());\n\n                angular.forEach(usageMetric.data, function (instance) {\n                  if (instance.values.length > 0 && ContainerMetadataService.containerIdExist(instance.key)) {\n                        var lastValue = instance.values[instance.values.length - 1];\n                        var name = ContainerMetadataService.idDictionary(instance.key) || instance.key;\n                        if (ContainerMetadataService.checkContainerName(name) && ContainerMetadataService.checkContainerFilter(name)){\n                            var limitInstance = _.find(limitMetric.data, function(el) {\n                                return el.key === instance.key;\n                            });\n\n                            if (angular.isDefined(limitInstance)) {\n                                var lastLimitValue = limitInstance.values[limitInstance.values.length - 1];\n\n                                if (lastLimitValue.y >= lastPhysmemValue.y) {\n                                    returnValues.push({\n                                        timestamp: lastValue.x,\n                                        key: name,\n                                        value: lastValue.y / lastPhysmemValue.y\n                                    });\n                                } else {\n                                    returnValues.push({\n                                        timestamp: lastValue.x,\n                                        key: name,\n                                        value: lastValue.y / lastLimitValue.y\n                                    });\n                                }\n                            }\n                        }\n                    }\n                });\n\n                return returnValues;\n            };\n\n            // create derived metric\n            this.metric = MetricListService.getOrCreateDerivedMetric(this.name, derivedFunction);\n\n            this.updateScope(this.metric.data);\n        };\n\n        DataModel.prototype.destroy = function () {\n            // remove subscribers and delete derived metric\n            MetricListService.destroyDerivedMetric(this.name);\n\n            // remove subscribers and delete base metrics\n            MetricListService.destroyMetric('cgroup.memory.usage');\n            MetricListService.destroyMetric('cgroup.memory.limit');\n            MetricListService.destroyMetric('mem.physmem');\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('CgroupMemoryUtilizationMetricDataModel', CgroupMemoryUtilizationMetricDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n (function () {\n     'use strict';\n\n    /**\n    * @name CgroupMemoryUsageMetricTimeSeriesDataModel\n    * @desc\n    */\n    function CgroupMemoryUsageMetricTimeSeriesDataModel(ContainerMetadataService, WidgetDataModel, MetricListService, DashboardService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n\n            this.name = this.dataModelOptions ? this.dataModelOptions.name : 'metric_' + DashboardService.getGuid();\n\n            // create create base metrics\n            var conversionFunction = function (value) {\n                    return value / 1024 / 1024;\n                },\n                usageMetric = MetricListService.getOrCreateConvertedMetric('cgroup.memory.usage', conversionFunction),\n                derivedFunction;\n\n\n            // create derived function\n            derivedFunction = function () {\n                var returnValues = [],\n                    lastValue,\n                    name;\n\n                angular.forEach(usageMetric.data, function (instance) {\n                    if (instance.values.length > 0 && ContainerMetadataService.containerIdExist(instance.key)) {\n                        lastValue = instance.values[instance.values.length - 1];\n                        name = ContainerMetadataService.idDictionary(instance.key) || instance.key;\n                        if (ContainerMetadataService.checkContainerName(name) && ContainerMetadataService.checkContainerFilter(name)){\n                            returnValues.push({\n                                timestamp: lastValue.x,\n                                key: name,\n                                value: lastValue.y\n                            });\n                        }\n\n                    }\n                });\n\n                return returnValues;\n            };\n\n            // create derived metric\n            this.metric = MetricListService.getOrCreateDerivedMetric(this.name, derivedFunction);\n\n            this.updateScope(this.metric.data);\n        };\n\n        DataModel.prototype.destroy = function () {\n            // remove subscribers and delete derived metric\n            MetricListService.destroyDerivedMetric(this.name);\n\n            // remove subscribers and delete base metrics\n            MetricListService.destroyMetric('cgroup.memory.usage');\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('CgroupMemoryUsageMetricTimeSeriesDataModel', CgroupMemoryUsageMetricTimeSeriesDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n (function () {\n     'use strict';\n\n    /**\n    * @name CgroupMemoryHeadroomMetricDataModel\n    * @desc\n    */\n    function CgroupMemoryHeadroomMetricDataModel(WidgetDataModel, MetricListService, DashboardService, ContainerMetadataService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n\n            this.name = this.dataModelOptions ? this.dataModelOptions.name : 'metric_' + DashboardService.getGuid();\n\n            // create create base metrics\n            var conversionFunction = function (value) {\n                    return value / 1024 / 1024;\n                },\n                physmemConversionFunction = function (value) {\n                    return value / 1024;\n                },\n                usageMetric = MetricListService.getOrCreateConvertedMetric('cgroup.memory.usage', conversionFunction),\n                limitMetric = MetricListService.getOrCreateConvertedMetric('cgroup.memory.limit', conversionFunction),\n                physmemMetric = MetricListService.getOrCreateConvertedMetric('mem.physmem', physmemConversionFunction),\n                derivedFunction;\n\n            // create derived function\n            derivedFunction = function () {\n                var returnValues = [],\n                    lastPhysmemValue;\n\n                lastPhysmemValue = (function () {\n                    if (physmemMetric.data.length > 0) {\n                        var instance = physmemMetric.data[physmemMetric.data.length - 1];\n                        if (instance.values.length > 0) {\n                            return instance.values[instance.values.length - 1];\n                        }\n                    }\n                }());\n\n                angular.forEach(usageMetric.data, function (instance) {\n                  if (instance.values.length > 0 && ContainerMetadataService.containerIdExist(instance.key)) {\n                        var lastValue = instance.values[instance.values.length - 1];\n                        var name = ContainerMetadataService.idDictionary(instance.key) || instance.key;\n                        if (ContainerMetadataService.checkContainerName(name) && ContainerMetadataService.checkContainerFilter(name)){\n                            returnValues.push({\n                                timestamp: lastValue.x,\n                                key: name + ' used',\n                                value: lastValue.y\n                            });\n                        }\n                    }\n                });\n\n                angular.forEach(limitMetric.data, function (instance) {\n                    if (instance.values.length > 0 && ContainerMetadataService.containerIdExist(instance.key)) {\n                        var lastValue = instance.values[instance.values.length - 1];\n                        var name = ContainerMetadataService.idDictionary(instance.key) || instance.key;\n                        if (ContainerMetadataService.checkContainerName(name) && ContainerMetadataService.checkContainerFilter(name)) {\n                            if (lastValue.y >= lastPhysmemValue.y) {\n                                returnValues.push({\n                                    timestamp: lastPhysmemValue.x,\n                                    key: name + ' limit (physical)',\n                                    value: lastPhysmemValue.y\n                                });\n                            } else {\n                                returnValues.push({\n                                    timestamp: lastValue.x,\n                                    key: name + ' limit',\n                                    value: lastValue.y\n                                });\n                            }\n                        }\n                    }\n                });\n\n                return returnValues;\n            };\n\n            // create derived metric\n            this.metric = MetricListService.getOrCreateDerivedMetric(this.name, derivedFunction);\n\n            this.updateScope(this.metric.data);\n        };\n\n        DataModel.prototype.destroy = function () {\n            // remove subscribers and delete derived metric\n            MetricListService.destroyDerivedMetric(this.name);\n\n            // remove subscribers and delete base metrics\n            MetricListService.destroyMetric('cgroup.memory.usage');\n            MetricListService.destroyMetric('cgroup.memory.limit');\n            MetricListService.destroyMetric('mem.physmem');\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('CgroupMemoryHeadroomMetricDataModel', CgroupMemoryHeadroomMetricDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n (function () {\n     'use strict';\n\n    /**\n    * @name CgroupCPUUsageMetricDataModel\n    * @desc\n    */\n    function CgroupCPUUsageMetricDataModel(ContainerMetadataService, WidgetDataModel, MetricListService, DashboardService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n            this.name = this.dataModelOptions ? this.dataModelOptions.name : 'metric_' + DashboardService.getGuid();\n\n            // create create base metrics\n            var cpuUsageMetric = MetricListService.getOrCreateCumulativeMetric('cgroup.cpuacct.usage'),\n                derivedFunction;\n\n            derivedFunction = function () {\n                var returnValues = [],\n                    lastValue,\n                    name;\n\n                if ( cpuUsageMetric.data.length > 0){\n                    angular.forEach(cpuUsageMetric.data, function (instance) {\n\n                        if (instance.values.length > 0 && ContainerMetadataService.containerIdExist(instance.key)) {\n                            lastValue = instance.values[instance.values.length - 1];\n                            name = ContainerMetadataService.idDictionary(instance.key) || instance.key;\n\n                            if (ContainerMetadataService.checkContainerName(name) && ContainerMetadataService.checkContainerFilter(name)) {\n                                returnValues.push({\n                                    timestamp: lastValue.x,\n                                    key: name,\n                                    value: lastValue.y / 1000 / 1000 / 1000\n                                });\n                            }\n                        }\n                    });\n                }\n\n                return returnValues;\n            };\n\n            // create derived metric\n            this.metric = MetricListService.getOrCreateDerivedMetric(this.name, derivedFunction);\n\n            this.updateScope(this.metric.data);\n        };\n\n        DataModel.prototype.destroy = function () {\n            // remove subscribers and delete derived metric\n            MetricListService.destroyDerivedMetric(this.name);\n\n            // remove subscribers and delete base metrics\n            MetricListService.destroyMetric('cgroup.cpuacct.usage');\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('CgroupCPUUsageMetricDataModel', CgroupCPUUsageMetricDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n/*global _*/\n\n (function () {\n     'use strict';\n\n    /**\n    * @name CgroupCPUHeadroomMetricDataModel\n    * @desc\n    */\n    function CgroupCPUHeadroomMetricDataModel(ContainerMetadataService, WidgetDataModel, MetricListService, DashboardService) {\n        var DataModel = function () {\n            return this;\n        };\n\n        DataModel.prototype = Object.create(WidgetDataModel.prototype);\n\n        DataModel.prototype.init = function () {\n            WidgetDataModel.prototype.init.call(this);\n            this.name = this.dataModelOptions ? this.dataModelOptions.name : 'metric_' + DashboardService.getGuid();\n\n            // create create base metrics\n            var cpuUsageMetric = MetricListService.getOrCreateCumulativeMetric('cgroup.cpuacct.usage'),\n                cpuSharesMetric = MetricListService.getOrCreateMetric('cgroup.cpusched.shares'),\n                cpuPeriodsMetric = MetricListService.getOrCreateMetric('cgroup.cpusched.periods'),\n                ncpuMetric = MetricListService.getOrCreateMetric('hinv.ncpu'),\n                derivedFunction;\n\n            derivedFunction = function () {\n                var returnValues = [];\n\n                if ( cpuUsageMetric.data.length > 0){\n                    angular.forEach(cpuUsageMetric.data, function (instance) {\n\n                        if (instance.values.length > 0 && ContainerMetadataService.containerIdExist(instance.key)) {\n                            var lastValue = instance.values[instance.values.length - 1];\n                            var name = ContainerMetadataService.idDictionary(instance.key) || instance.key;\n\n                            if (ContainerMetadataService.checkContainerName(name) && ContainerMetadataService.checkContainerFilter(name)) {\n                                returnValues.push({\n                                    timestamp: lastValue.x,\n                                    key: name,\n                                    value: lastValue.y / 1000 / 1000 / 1000\n                                });\n                            }\n                        }\n                    });\n                }\n\n                if ( cpuPeriodsMetric.data.length > 0) {\n                    angular.forEach(cpuPeriodsMetric.data, function (instance) {\n\n                        if (instance.values.length > 0 && ContainerMetadataService.containerIdExist(instance.key)) {\n                            var lastValue = instance.values[instance.values.length - 1];\n                            var name = ContainerMetadataService.idDictionary(instance.key) || instance.key;\n\n                            if (ContainerMetadataService.checkContainerName(name) && ContainerMetadataService.checkContainerFilter(name)) {\n\n                                if (lastValue.y > 0) {\n                                    var cpuSharesInstance = _.find(cpuSharesMetric.data, function(el) {\n                                        return el.key === instance.key;\n                                    });\n\n                                    if (angular.isDefined(cpuSharesInstance)) {\n                                        var cpuSharesValue = cpuSharesInstance.values[cpuSharesInstance.values.length - 1];\n                                        returnValues.push({\n                                            timestamp: lastValue.x,\n                                            key: name + ' (limit)',\n                                            value: cpuSharesValue.y / lastValue.y\n                                        });\n                                    }\n                                } else {\n                                    if (ncpuMetric.data.length > 0) {\n                                        var ncpuInstance = ncpuMetric.data[ncpuMetric.data.length - 1];\n                                        if (ncpuInstance.values.length > 0) {\n                                            var ncpuValue = ncpuInstance.values[ncpuInstance.values.length - 1];\n                                            returnValues.push({\n                                                timestamp: ncpuValue.x,\n                                                key: name + ' (physical)',\n                                                value: ncpuValue.y\n                                            });\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    });\n                }\n\n                return returnValues;\n            };\n\n            // create derived metric\n            this.metric = MetricListService.getOrCreateDerivedMetric(this.name, derivedFunction);\n\n            this.updateScope(this.metric.data);\n        };\n\n        DataModel.prototype.destroy = function () {\n            // remove subscribers and delete derived metric\n            MetricListService.destroyDerivedMetric(this.name);\n\n            // remove subscribers and delete base metrics\n            MetricListService.destroyMetric('cgroup.cpuacct.usage');\n\n            WidgetDataModel.prototype.destroy.call(this);\n        };\n\n        return DataModel;\n    }\n\n    angular\n        .module('datamodel')\n        .factory('CgroupCPUHeadroomMetricDataModel', CgroupCPUHeadroomMetricDataModel);\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n/*global _*/\n\n (function () {\n     'use strict';\n\n     /**\n     * @name DashboardService\n     * @desc\n     */\n     function DashboardService($rootScope, $http, $interval, $log, $location, toastr, config, PMAPIService, MetricListService, ContainerMetadataService) {\n        var loopErrors = 0,\n            intervalPromise;\n\n        /**\n        * @name cancelInterval\n        * @desc\n        */\n        function cancelInterval() {\n            if (intervalPromise) {\n                $interval.cancel(intervalPromise);\n            }\n        }\n\n        /**\n        * @name updateMetricsCallback\n        * @desc\n        */\n        function updateMetricsCallback(success) {\n            if (!success) {\n                toastr.error('Failed fetching metrics. Trying again.', 'Error');\n                loopErrors = loopErrors + 1;\n            } else {\n                loopErrors = 0;\n            }\n            if (loopErrors > 5) {\n                cancelInterval(intervalPromise);\n                loopErrors = 0;\n                $rootScope.properties.context = '-1';\n                $rootScope.flags.contextAvailable = false;\n                toastr.error('Consistently failed fetching metrics from host (>5). Please update the hostname to resume operation.', 'Error');\n            }\n        }\n\n        /**\n        * @name updateMetrics\n        * @desc\n        */\n        function updateMetrics(callback) {\n            var metricArr = [],\n                context = $rootScope.properties.context,\n                simpleMetrics = MetricListService.getSimpleMetricList();\n\n            if (context && context > 0 && simpleMetrics.length > 0) {\n                angular.forEach(simpleMetrics, function (value) {\n                    metricArr.push(value.name);\n                });\n\n                PMAPIService.getMetrics(context, metricArr)\n                    .then(function (metrics) {\n                        var name,\n                            metricInstance,\n                            iid,\n                            iname;\n\n                        if (metrics.values.length !== simpleMetrics.length) {\n                            var currentMetric;\n\n                            angular.forEach(simpleMetrics, function (metric) {\n                                currentMetric= _.find(metrics.values, function (el) {\n                                    return el.name === metric.name;\n                                });\n                                if (angular.isUndefined(currentMetric)) {\n                                    metric.clearData();\n                                }\n                            });\n                        }\n\n                        angular.forEach(metrics.values, function (value) {\n                            name = value.name;\n\n                            metricInstance = _.find(simpleMetrics, function (el) {\n                                return el.name === name;\n                            });\n\n                            if(value.instances.length !== metricInstance.data.length) {\n                                metricInstance.deleteInvalidInstances(value.instances);\n                            }\n\n                            if (angular.isDefined(metricInstance) && metricInstance !== null) {\n                                angular.forEach(value.instances, function (instance) {\n                                    iid = angular.isUndefined(instance.instance) ? 1 : instance.instance;\n                                    iname = metrics.inames[name].inames[iid];\n\n                                    metricInstance.pushValue(metrics.timestamp, iid, iname, instance.value);\n                                });\n                            }\n                        });\n                    }).then(\n                        function () {\n                            callback(true);\n                            $rootScope.$broadcast('updateMetrics');\n                        },\n                        function (response) {\n                            if(response.status === 400 && response.data.indexOf('-12376') !== -1) {\n                                updateContext();\n                            }\n                            callback(false);\n                    });\n            }\n        }\n\n        /**\n        * @name updateDerivedMetrics\n        * @desc\n        */\n        function updateDerivedMetrics() {\n            var derivedMetrics = MetricListService.getDerivedMetricList();\n            if (derivedMetrics.length > 0) {\n                angular.forEach(derivedMetrics, function (metric) {\n                    metric.updateValues();\n                });\n                $rootScope.$broadcast('updateDerivedMetrics');\n            }\n        }\n\n        /**\n        * @name intervalFunction\n        * @desc\n        */\n        function intervalFunction() {\n            updateMetrics(updateMetricsCallback);\n            updateDerivedMetrics();\n        }\n\n        /**\n        * @name updateInterval\n        * @desc\n        */\n        function updateInterval() {\n            cancelInterval(intervalPromise);\n\n            if ($rootScope.properties.host) {\n                if ($rootScope.properties.context &&\n                    $rootScope.properties.context > 0) {\n                    intervalPromise = $interval(intervalFunction, parseInt($rootScope.properties.interval) * 1000);\n                } else {\n                    toastr.error('Vector is not connected to the host. Please update the hostname to resume operation.', 'Error');\n                }\n            }\n        }\n\n        /**\n        * @name parseHostInput\n        * @desc\n        */\n        function parseHostInput(host) {\n            var hostMatch = null;\n            if (host) {\n                hostMatch = host.match('(.*):([0-9]*)');\n                if (hostMatch !== null) {\n                    $rootScope.properties.host = hostMatch[1];\n                    $rootScope.properties.port = hostMatch[2];\n                } else {\n                    $rootScope.properties.host = host;\n                }\n            }\n        }\n\n        /**\n        * @name updateContext\n        * @desc\n        */\n        function updateContext() {\n            $rootScope.flags.contextUpdating = true;\n            $rootScope.flags.contextAvailable = false;\n\n            PMAPIService.getHostspecContext($rootScope.properties.hostspec, 600)\n                .then(function (data) {\n                    $rootScope.flags.contextUpdating = false;\n                    $rootScope.flags.contextAvailable = true;\n                    $rootScope.properties.context = data;\n                    updateInterval();\n                    PMAPIService.getMetrics(data, ['pmcd.hostname'])\n                        .then(function (data) {\n                            $rootScope.properties.hostname = data.values[0].instances[0].value;\n                        }, function () {\n                            $rootScope.properties.hostname = 'Hostname not available.';\n                            $log.error('Error fetching hostname.');\n                        });\n                }, function () {\n                    toastr.error('Failed fetching context from host. Try updating the hostname.', 'Error');\n                    $rootScope.flags.contextUpdating = false;\n                    $rootScope.flags.contextAvailable = false;\n                });\n        }\n\n        /**\n        * @name updateHost\n        * @desc\n        */\n        function updateHost(host) {\n            $location.search('host', host);\n            $location.search('hostspec', $rootScope.properties.hostspec);\n\n            $rootScope.properties.context = -1;\n            $rootScope.properties.hostname = null;\n            $rootScope.properties.port = config.port;\n\n            MetricListService.clearMetricList();\n            MetricListService.clearDerivedMetricList();\n\n            parseHostInput(host);\n            updateContext();\n        }\n\n        /**\n        * @name initialize\n        * @desc\n        */\n        function initialize() {\n            if ($rootScope.properties) {\n                if (!$rootScope.properties.interval) {\n                    $rootScope.properties.interval = config.interval;\n                }\n                if (!$rootScope.properties.window) {\n                    $rootScope.properties.window = config.window;\n                }\n                if (!$rootScope.properties.protocol) {\n                    $rootScope.properties.protocol = config.protocol;\n                }\n                if (!$rootScope.properties.host) {\n                    $rootScope.properties.host = '';\n                }\n                if (!$rootScope.properties.hostspec) {\n                    $rootScope.properties.hostspec = config.hostspec;\n                }\n                if (!$rootScope.properties.port) {\n                    $rootScope.properties.port = config.port;\n                }\n                if (!$rootScope.properties.context ||\n                    $rootScope.properties.context < 0) {\n                    updateContext();\n                } else {\n                    updateInterval();\n                }\n            } else {\n                $rootScope.properties = {\n                    protocol: config.protocol,\n                    host: '',\n                    hostspec: config.hostspec,\n                    port: config.port,\n                    context: -1,\n                    hostname: null,\n                    window: config.window,\n                    interval: config.interval,\n                    containerFilter: '',\n                    containerList: [],\n                    selectedContainer: ''\n                };\n            }\n\n            $rootScope.flags = {\n                contextAvailable: false,\n                contextUpdating: false,\n                isHostnameExpanded: config.expandHostname,\n                enableContainerWidgets: config.enableContainerWidgets,\n                disableHostspecInput: config.disableHostspecInput,\n                disableContainerFilter: config.disableContainerFilter,\n                disableContainerSelect: config.disableContainerSelect,\n                containerSelectOverride: config.containerSelectOverride,\n                disableContainerSelectNone: false,\n                disableHostnameInputContainerSelect: config.disableHostnameInputContainerSelect\n            };\n\n            if (config.enableContainerWidgets) {\n                ContainerMetadataService.initialize();\n            }\n        }\n\n        /**\n        * @name getGuid\n        * @desc\n        */\n        function getGuid() {\n            return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n        }\n\n        return {\n            cancelInterval: cancelInterval,\n            updateInterval: updateInterval,\n            updateHost: updateHost,\n            updateContext: updateContext,\n            getGuid: getGuid,\n            initialize: initialize\n        };\n    }\n\n    angular\n        .module('dashboard', [\n            'pmapi',\n            'metriclist',\n            'containermetadata'\n        ])\n        .factory('DashboardService', DashboardService);\n\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n /*global d3*/\n\n (function () {\n     'use strict';\n\n    /**\n    * @name D3Service\n    * @desc\n    */\n    function D3Service() {\n\n        function xAxisTickFormat() {\n            return function (d) {\n                return d3.time.format('%X')(new Date(d));\n            };\n        }\n\n        function yAxisTickFormat() {\n            return function (d) {\n                return d3.format('.02f')(d);\n            };\n        }\n\n        function yAxisIntegerTickFormat() {\n            return function (d) {\n                return d3.format('f')(d);\n            };\n        }\n\n        function yAxisPercentageTickFormat() {\n            return function (d) {\n                return d3.format('%')(d);\n            };\n        }\n\n        function xFunction() {\n            return function (d) {\n                return d.x;\n            };\n        }\n\n        function yFunction() {\n            return function (d) {\n                return d.y;\n            };\n        }\n\n        function getId() {\n            return 'chart_' +\n                Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n        }\n\n        return {\n            xAxisTickFormat: xAxisTickFormat,\n            yAxisTickFormat: yAxisTickFormat,\n            yAxisIntegerTickFormat: yAxisIntegerTickFormat,\n            yAxisPercentageTickFormat: yAxisPercentageTickFormat,\n            xFunction: xFunction,\n            yFunction: yFunction,\n            getId: getId\n        };\n    }\n\n    angular\n        .module('d3', [])\n        .factory('D3Service', D3Service);\n })();\n\n/**!\n *\n *  Copyright 2016 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n/*global _*/\n\n (function () {\n     'use strict';\n\n     /**\n     * @name ContainerMetadataService\n     */\n     function ContainerMetadataService($http, $rootScope, $q, $interval, $routeParams, $location, $injector, $log, config, MetricListService) {\n\n        var containerParsedFromQuerystring = false,\n            containerNameResolver;\n\n        // loading containerNameResolver if it was defined\n        try {\n            containerNameResolver = $injector.get('containerNameResolver');\n        } catch(e) {\n            $log.debug(\"No external container name resolver defined.\");\n        }\n\n        /**\n        * @name idDictionary\n        * @desc\n        */\n        var idMap = {};\n        function idDictionary(key) {\n            return idMap[parseId(key)];\n        }\n\n        /**\n        * @name parseId\n        * @desc parses different types of docker ID\n        */\n        function parseId(id) {\n            //handle regular docker\n            if (id === null){\n                return false;\n            }\n            if (id.indexOf('docker/') !==-1){\n                id = id.split('/')[2];\n            //handle systemd\n            } else if (id.indexOf('/docker-') !==-1){\n                id = id.split('-')[1].split('.')[0];\n            }\n            return id;\n        }\n\n        /**\n        * @name clearIdDictionary\n        * @desc\n        */\n        function clearIdDictionary() {\n            idMap = {};\n        }\n\n        /**\n        * @name containerIdExist\n        * @desc returns true if id exists in the idMap\n        */\n        function containerIdExist(id) {\n            return (angular.isDefined(idMap[parseId(id)]) && idMap[parseId(id)] !== '');\n        }\n\n        /**\n        * @name updateMetrics\n        * @desc\n        */\n        function updateMetrics() {\n            updateIdDictionary();\n            $rootScope.properties.containerList = getContainerList();\n\n            //TODO: find a better way for parsing the container name from the query string just once.\n            if (containerParsedFromQuerystring) {\n                if($rootScope.properties.containerList.indexOf($routeParams.container) === -1) { // can't find the selected container in the list\n                    $rootScope.properties.selectedContainer = '';\n                }\n            } else {\n                if (angular.isDefined($routeParams.container)) {\n                    if ($rootScope.properties.containerList.indexOf($routeParams.container) !== -1) {\n                        $rootScope.properties.selectedContainer = $routeParams.container;\n                        $rootScope.flags.disableContainerSelectNone = true;\n                        containerParsedFromQuerystring = true;\n                    }\n                } else {\n                    containerParsedFromQuerystring = true;\n                }\n            }\n        }\n\n        /**;\n        * @name initialize\n        * @desc\n        */\n        /*eslint-disable no-unused-vars*/\n        var containerCgroups,\n            containerNames,\n            updateMetricsListener;\n        function initialize() {\n            containerCgroups = MetricListService.getOrCreateMetric('containers.cgroup');\n            containerNames = MetricListService.getOrCreateMetric('containers.name');\n\n            updateMetricsListener = $rootScope.$on('updateMetrics', updateMetrics);\n        }\n        /*eslint-enable no-unused-vars*/\n\n        /**\n        * @name resolveId\n        * @desc\n        */\n        function resolveId(instanceKey) {\n            var instanceName;\n            if(typeof containerNameResolver === 'undefined') {\n                if (!config.useCgroupId) {\n                    instanceName = _.find(containerNames.data, function (el) {\n                        return el.key === instanceKey;\n                    });\n                    if (instanceName) {\n                        return instanceName.values[instanceName.values.length - 1].y;\n                    }\n                }\n                return instanceKey.substring(0,12);\n            } else {\n                instanceName = _.find(containerNames.data, function (el) {\n                    return el.key === instanceKey;\n                });\n                return containerNameResolver.resolve(instanceKey, instanceName);\n            }\n        }\n\n        /**;\n        * @name updateIdDictionary\n        * @desc\n        */\n        function updateIdDictionary(){\n            //TODO: implement better logic to add and remove items from idMap. Always creating a new object and resolving all names is expensive.\n            idMap = containerCgroups.data.reduce(function(obj, item) {\n                obj[item.key] = resolveId(item.key);\n                return obj;\n            },{});\n        }\n\n        /**\n        * @name getContainerList\n        * @desc\n        */\n        function getContainerList() {\n            return containerCgroups.data.reduce(function(obj, item) {\n                var resolved = resolveId(item.key);\n                if (angular.isDefined(resolved)){\n                    obj.push(resolved);\n                }\n                return obj;\n            },[]);\n        }\n\n        /**\n        * @name checkContainerFilter\n        * @desc\n        */\n        function checkContainerFilter(name){\n            return ($rootScope.properties.containerFilter === '' || name.indexOf($rootScope.properties.containerFilter) !==-1);\n        }\n\n        /**\n        * @name checkContainerName\n        * @desc\n        */\n        function checkContainerName(name){\n            return ($rootScope.properties.selectedContainer === '' || name.indexOf($rootScope.properties.selectedContainer) !== -1);\n        }\n\n        /**\n        * @name updateContainer\n        * @desc\n        */\n        function updateContainer(){\n            $location.search('container', $rootScope.properties.selectedContainer);\n            if ($rootScope.properties.selectedContainer !== '') {\n                $rootScope.flags.disableContainerSelectNone = true;\n            } else {\n                $rootScope.flags.disableContainerSelectNone = false;\n            }\n        }\n\n        /**\n        * @name updateContainerFilter\n        * @desc\n        */\n        function updateContainerFilter() {\n            $location.search('containerFilter', $rootScope.properties.containerFilter);\n        }\n\n        return {\n            idDictionary: idDictionary,\n            getContainerList: getContainerList,\n            updateIdDictionary: updateIdDictionary,\n            clearIdDictionary: clearIdDictionary,\n            checkContainerFilter: checkContainerFilter,\n            containerIdExist: containerIdExist,\n            checkContainerName: checkContainerName,\n            updateContainer: updateContainer,\n            updateContainerFilter: updateContainerFilter,\n            initialize: initialize\n        };\n    }\n\n    angular\n        .module('containermetadata', [\n            'metriclist'\n        ])\n        .factory('ContainerMetadataService', ContainerMetadataService);\n\n })();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n/*eslint-disable angular/controller-as*/\n\n(function () {\n    'use strict';\n\n    function CustomWidgetSettingsCtrl($scope, $uibModalInstance, widget) {\n        $scope.widget = widget;\n        $scope.result = angular.extend({}, $scope.result, widget);\n\n        $scope.ok = function () {\n          $uibModalInstance.close($scope.result);\n        };\n\n        $scope.cancel = function () {\n          $uibModalInstance.dismiss('cancel');\n        };\n    }\n\n    angular\n        .module('customWidgetSettings', [])\n        .controller('CustomWidgetSettingsController', CustomWidgetSettingsCtrl);\n})();\n\n/**!\n *\n *  Copyright 2016 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n/*global d3, nv, document*/\n/*eslint-disable angular/document-service, angular/definedundefined*/\n\nnv.models.tooltip = function () {\n\n    'use strict';\n\n    var id = 'nvtooltip-' + Math.floor(Math.random() * 100000), // Generatooltip() object.\n        data = null,\n        gravity = 'w',   // Can be 'n','s','e','w'. Determines how tooltip is positioned.\n        distance = 25, // Distance to offset tooltip from the mouse location.\n        snapDistance = 0,   // Tolerance a\n    // fixedTop = null, // If not null, this fixes the top position of the tooltip.\n        classes = null,  // Attaches additional CSS classes to the tooltip DIV that is created.\n        chartContainer = null, // Parent dom element of the SVG that holds the chart.\n        hidden = true,  // Start off hidden, toggle with hide/show functions below.\n        hideDelay = 200,  // Delay (in ms) before the tooltip hides after calling hide().\n        tooltip = null, // d3 select of the tooltip div.\n        lastPosition = {left: null, top: null}, // Last position the tooltip was in.\n        enabled = true,  // True -> tooltips are rendered. False -> don't render tooltips.\n        duration = 100, // Tooltip movement duration, in ms.\n        headerEnabled = true, // If is to show the tooltip header.\n        nvPointerEventsClass = 'nv-pointer-events-none'; // CSS class to specify whether element should not have\n    var position = function () {\n        return {\n            left: d3.event.clientX,\n            top: d3.event.clientY\n        };\n    };\n\n    // Format function for the tooltip values column.\n    var valueFormatter = function (d) {\n        return d;\n    };\n\n    // Format function for the tooltip header value.\n    var headerFormatter = function (d) {\n        return d;\n    };\n\n    var keyFormatter = function (d) {\n        return d;\n    };\n\n    // By default, the tooltip model renders a beautiful table inside a DIV.\n    // You can override this function if a custom tooltip is desired.\n    var contentGenerator = function (d) {\n        if (d === null) {\n            return '';\n        }\n\n        var table = d3.select(document.createElement('table'));\n        if (headerEnabled) {\n            var theadEnter = table.selectAll('thead')\n                .data([d])\n                .enter().append('thead');\n\n            theadEnter.append('tr')\n                .append('td')\n                .attr('colspan', 3)\n                .append('strong')\n                .classed('x-value', true)\n                .html(headerFormatter(d.value));\n        }\n\n        var tbodyEnter = table.selectAll('tbody')\n            .data([d])\n            .enter().append('tbody');\n\n        var trowEnter = tbodyEnter.selectAll('tr')\n            .data(function (p) {\n                return p.series;\n            })\n            .enter()\n            .append('tr')\n            .classed('highlight', function (p) {\n                return p.highlight;\n            });\n\n        trowEnter.append('td')\n            .classed('legend-color-guide', true)\n            .append('div')\n            .style('background-color', function (p) {\n                return p.color;\n            });\n\n        trowEnter.append('td')\n            .classed('key', true)\n            .classed('total', function (p) {\n                return !!p.total;\n            })\n            .html(function (p, i) {\n                return keyFormatter(p.key, i);\n            });\n\n        trowEnter.append('td')\n            .classed('value', true)\n            .html(function (p, i) {\n                return valueFormatter(p.value, i);\n            });\n\n        trowEnter.selectAll('td').each(function (p) {\n            if (p.highlight) {\n                var opacityScale = d3.scale.linear().domain([0, 1]).range(['#fff', p.color]);\n                var opacity = 0.6;\n                d3.select(this)\n                    .style('border-bottom-color', opacityScale(opacity))\n                    .style('border-top-color', opacityScale(opacity))\n                ;\n            }\n        });\n\n        var html = table.node().outerHTML;\n        if (d.footer !== undefined) {\n            html += '<div class=\"footer\">' + d.footer + '</div>';\n        }\n        return html;\n\n    };\n\n    var dataSeriesExists = function (d) {\n        if (d && d.series) {\n            if (d.series instanceof Array) {\n                return !!d.series.length;\n            }\n            // if object, it's okay just convert to array of the object\n            if (d.series instanceof Object) {\n                d.series = [d.series];\n                return true;\n            }\n        }\n        return false;\n    };\n\n    // Calculates the gravity offset of the tooltip. Parameter is position of tooltip\n    // relative to the viewport.\n    var calcGravityOffset = function (pos) {\n        var height = tooltip.node().offsetHeight,\n            width = tooltip.node().offsetWidth,\n            clientWidth = document.documentElement.clientWidth, // Don't want scrollbars.\n            clientHeight = document.documentElement.clientHeight, // Don't want scrollbars.\n            left, top, tmp;\n\n        // calculate position based on gravity\n        switch (gravity) {\n            case 'e':\n                left = -width - distance;\n                top = -(height / 2);\n                if (pos.left + left < 0) {\n                    left = distance;\n                }\n                if ((tmp = pos.top + top) < 0) {\n                    top -= tmp;\n                }\n                if ((tmp = pos.top + top + height) > clientHeight) {\n                    top -= tmp - clientHeight;\n                }\n                break;\n            case 'w':\n                left = distance;\n                top = -(height / 2);\n                if (pos.left + left + width > clientWidth) {\n                    left = -width - distance;\n                }\n                if ((tmp = pos.top + top) < 0) {\n                    top -= tmp;\n                }\n                if ((tmp = pos.top + top + height) > clientHeight) {\n                    top -= tmp - clientHeight;\n                }\n                break;\n            case 'n':\n                left = -(width / 2) - 5; // - 5 is an approximation of the mouse's height.\n                top = distance;\n                if (pos.top + top + height > clientHeight) {\n                    top = -height - distance;\n                }\n                if ((tmp = pos.left + left) < 0) {\n                    left -= tmp;\n                }\n                if ((tmp = pos.left + left + width) > clientWidth) {\n                    left -= tmp - clientWidth;\n                }\n                break;\n            case 's':\n                left = -(width / 2);\n                top = -height - distance;\n                if (pos.top + top < 0) {\n                    top = distance;\n                }\n                if ((tmp = pos.left + left) < 0) {\n                    left -= tmp;\n                }\n                if ((tmp = pos.left + left + width) > clientWidth) {\n                    left -= tmp - clientWidth;\n                }\n                break;\n            case 'center':\n                left = -(width / 2);\n                top = -(height / 2);\n                break;\n            default:\n                left = 0;\n                top = 0;\n                break;\n        }\n\n        return {'left': left, 'top': top};\n    };\n\n    /*\n     Positions the tooltip in the correct place, as given by the position() function.\n     */\n    var positionTooltip = function () {\n        nv.dom.read(function () {\n            var pos = position(),\n                gravityOffset = calcGravityOffset(pos),\n                left = pos.left + gravityOffset.left,\n                top = pos.top + gravityOffset.top;\n\n            // delay hiding a bit to avoid flickering\n            if (hidden) {\n                tooltip\n                    .interrupt()\n                    .transition()\n                    .delay(hideDelay)\n                    .duration(0)\n                    .style('opacity', 0);\n            } else {\n                // using tooltip.style('transform') returns values un-usable for tween\n                var oldTranslate = 'translate(' + lastPosition.left + 'px, ' + lastPosition.top + 'px)';\n                var newTranslate = 'translate(' + left + 'px, ' + top + 'px)';\n                var translateInterpolator = d3.interpolateString(oldTranslate, newTranslate);\n                var isHidden = tooltip.style('opacity') < 0.1;\n\n                tooltip\n                    .interrupt() // cancel running transitions\n                    .transition()\n                    .duration(isHidden ? 0 : duration)\n                    // using tween since some versions of d3 can't auto-tween a translate on a div\n                    .styleTween('transform', function () {\n                        return translateInterpolator;\n                    }, 'important')\n                    // Safari has its own `-webkit-transform` and does not support `transform`\n                    .styleTween('-webkit-transform', function () {\n                        return translateInterpolator;\n                    })\n                    .style('-ms-transform', newTranslate)\n                    .style('opacity', 1);\n            }\n\n            lastPosition.left = left;\n            lastPosition.top = top;\n        });\n    };\n\n    // Creates new tooltip container, or uses existing one on DOM.\n    function initTooltip() {\n        if (!tooltip) {\n\n            var container = document.body;\n\n            // Create new tooltip div if it doesn't exist on DOM.\n            tooltip = d3.select(container).append('div')\n                .attr('class', 'nvtooltip ' + (classes ? classes : 'xy-tooltip'))\n                .attr('id', id);\n            tooltip.style('top', 0).style('left', 0);\n            tooltip.style('opacity', 0);\n            tooltip.style('position', 'fixed');\n            tooltip.selectAll('div, table, td, tr').classed(nvPointerEventsClass, true);\n            tooltip.classed(nvPointerEventsClass, true);\n        }\n    }\n\n    // Draw the tooltip onto the DOM.\n    function nvtooltip() {\n        if (!enabled) {\n            return;\n        }\n        if (!dataSeriesExists(data)) {\n            return;\n        }\n\n        nv.dom.write(function () {\n            initTooltip();\n            // Generate data and set it into tooltip.\n            // Bonus - If you override contentGenerator and return falsey you can use something like\n            //         React or Knockout to bind the data for your tooltip.\n            var newContent = contentGenerator(data);\n            if (newContent) {\n                tooltip.node().innerHTML = newContent;\n            }\n\n            positionTooltip();\n        });\n\n        return nvtooltip;\n    }\n\n    nvtooltip.nvPointerEventsClass = nvPointerEventsClass;\n    nvtooltip.options = nv.utils.optionsFunc.bind(nvtooltip);\n\n    nvtooltip._options = Object.create({}, {\n        // simple read/write options\n        duration: {\n            get: function () {\n                return duration;\n            }, set: function (_) {\n                duration = _;\n            }\n        },\n        gravity: {\n            get: function () {\n                return gravity;\n            }, set: function (_) {\n                gravity = _;\n            }\n        },\n        distance: {\n            get: function () {\n                return distance;\n            }, set: function (_) {\n                distance = _;\n            }\n        },\n        snapDistance: {\n            get: function () {\n                return snapDistance;\n            }, set: function (_) {\n                snapDistance = _;\n            }\n        },\n        classes: {\n            get: function () {\n                return classes;\n            }, set: function (_) {\n                classes = _;\n            }\n        },\n        chartContainer: {\n            get: function () {\n                return chartContainer;\n            }, set: function (_) {\n                chartContainer = _;\n            }\n        },\n        enabled: {\n            get: function () {\n                return enabled;\n            }, set: function (_) {\n                enabled = _;\n            }\n        },\n        hideDelay: {\n            get: function () {\n                return hideDelay;\n            }, set: function (_) {\n                hideDelay = _;\n            }\n        },\n        contentGenerator: {\n            get: function () {\n                return contentGenerator;\n            }, set: function (_) {\n                contentGenerator = _;\n            }\n        },\n        valueFormatter: {\n            get: function () {\n                return valueFormatter;\n            }, set: function (_) {\n                valueFormatter = _;\n            }\n        },\n        headerFormatter: {\n            get: function () {\n                return headerFormatter;\n            }, set: function (_) {\n                headerFormatter = _;\n            }\n        },\n        keyFormatter: {\n            get: function () {\n                return keyFormatter;\n            }, set: function (_) {\n                keyFormatter = _;\n            }\n        },\n        headerEnabled: {\n            get: function () {\n                return headerEnabled;\n            }, set: function (_) {\n                headerEnabled = _;\n            }\n        },\n        position: {\n            get: function () {\n                return position;\n            }, set: function (_) {\n                position = _;\n            }\n        },\n\n        // options with extra logic\n        hidden: {\n            get: function () {\n                return hidden;\n            }, set: function (_) {\n                if (hidden !== _) {\n                    hidden = !!_;\n                    nvtooltip();\n                }\n            }\n        },\n        data: {\n            get: function () {\n                return data;\n            }, set: function (_) {\n                // if showing a single data point, adjust data format with that\n                if (_.point) {\n                    _.value = _.point.x;\n                    _.series = _.series || {};\n                    _.series.value = _.point.y;\n                    _.series.color = _.point.color || _.series.color;\n                }\n                data = _;\n            }\n        },\n\n        // read only properties\n        node: {\n            get: function () {\n                return tooltip.node();\n            }, set: function () {\n            }\n        },\n        id: {\n            get: function () {\n                return id;\n            }, set: function () {\n            }\n        }\n    });\n\n    nv.utils.initOptions(nvtooltip);\n    return nvtooltip;\n};\n\n/**!\n *\n *  Copyright 2016 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n(function() {\n  'use strict';\n\n  angular\n    .module('chart', [\n       'd3',\n       'dashboard'\n    ]);\n\n})();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n /*global d3, nv*/\n\n(function () {\n    'use strict';\n\n    function lineTimeSeries($rootScope, $log, D3Service) {\n\n        function link(scope) {\n            scope.id = D3Service.getId();\n            scope.flags = $rootScope.flags;\n\n            var chart;\n\n            nv.addGraph(function () {\n\n              var height = 250;\n\n              chart = nv.models.lineChart().options({\n                  duration: 0,\n                  useInteractiveGuideline: true,\n                  interactive: false,\n                  showLegend: true,\n                  showXAxis: true,\n                  showYAxis: true\n              });\n\n              chart.margin({'left': 35, 'right': 35});\n\n              chart.height(height);\n\n              if (scope.forcey) {\n                  chart.forceY([0, scope.forcey]);\n              }\n\n              chart.x(D3Service.xFunction());\n              chart.y(D3Service.yFunction());\n\n              chart.xAxis.tickFormat(D3Service.xAxisTickFormat());\n\n              if (scope.percentage) {\n                  chart.yAxis.tickFormat(D3Service.yAxisPercentageTickFormat());\n              } else if (scope.integer) {\n                  chart.yAxis.tickFormat(D3Service.yAxisIntegerTickFormat());\n              } else {\n                  chart.yAxis.tickFormat(D3Service.yAxisTickFormat());\n              }\n\n              nv.utils.windowResize(chart.update);\n\n              d3.select('#' + scope.id + ' svg')\n                .datum(scope.data)\n                .style('height', height + 'px')\n                .transition().duration(0)\n                .call(chart);\n\n              return chart;\n            });\n\n            scope.$on('updateMetrics', function () {\n                if (scope.area) {\n                  angular.forEach(scope.data, function (instance) {\n                    instance.area=true;\n                  });\n                }\n                chart.update();\n            });\n        }\n\n        return {\n            restrict: 'A',\n            templateUrl: 'app/components/chart/chart.html',\n            scope: {\n                data: '=',\n                percentage: '=',\n                integer: '=',\n                forcey: '=',\n                area: '='\n            },\n            link: link\n        };\n    }\n\n    angular\n        .module('chart')\n        .directive('lineTimeSeries', lineTimeSeries);\n\n})();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n /*global d3, nv*/\n\n(function () {\n    'use strict';\n\n    function areaStackedTimeSeries($rootScope, $log, D3Service) {\n\n        function link(scope) {\n            scope.id = D3Service.getId();\n            scope.flags = $rootScope.flags;\n            scope.legend = true;\n\n            var chart;\n\n            nv.addGraph(function () {\n\n              var yAxisTickFormat = D3Service.yAxisTickFormat(),\n                  height = 250;\n\n              chart = nv.models.stackedAreaChart().options({\n                  duration: 0,\n                  useInteractiveGuideline: true,\n                  interactive: false,\n                  showLegend: true,\n                  showXAxis: true,\n                  showYAxis: true,\n                  showControls: false\n              });\n\n              chart.margin({'left': 35, 'right': 35});\n\n              chart.height(height);\n\n              if (scope.forcey) {\n                  chart.yDomain([0, scope.forcey]);\n              }\n\n              chart.x(D3Service.xFunction());\n              chart.y(D3Service.yFunction());\n\n              chart.xAxis.tickFormat(D3Service.xAxisTickFormat());\n\n              if (scope.percentage) {\n                  yAxisTickFormat = D3Service.yAxisPercentageTickFormat();\n                  chart.yAxis.tickFormat();\n              } else if (scope.integer) {\n                  yAxisTickFormat = D3Service.yAxisIntegerTickFormat();\n                  chart.yAxis.tickFormat();\n              }\n\n              chart.yAxis.tickFormat(yAxisTickFormat);\n\n              nv.utils.windowResize(chart.update);\n\n              d3.select('#' + scope.id + ' svg')\n                .datum(scope.data)\n                .style('height', height + 'px')\n                .transition().duration(0)\n                .call(chart);\n\n              return chart;\n            });\n\n            scope.$on('updateMetrics', function () {\n                chart.update();\n            });\n        }\n\n        return {\n            restrict: 'A',\n            templateUrl: 'app/components/chart/chart.html',\n            scope: {\n                data: '=',\n                percentage: '=',\n                integer: '=',\n                forcey: '='\n            },\n            link: link\n        };\n    }\n\n    areaStackedTimeSeries.$inject = [\n        '$rootScope',\n        '$log',\n        'D3Service'\n    ];\n\n    angular\n        .module('chart')\n        .directive('areaStackedTimeSeries', areaStackedTimeSeries);\n})();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n/*jslint node: true*/\n/*global angular*/\n/*jslint browser: true*/\n/*jslint nomen: true */\n\n(function () {\n    'use strict';\n\n    /**\n    * @name MainCtrl\n    * @desc Main Controller\n    */\n    function MainCtrl($document, $rootScope, $log, $route, $routeParams, $location, widgetDefinitions, widgets, embed, version, DashboardService, ContainerMetadataService, ModalService) {\n\n        var vm = this,\n            widgetsToLoad = widgets;\n\n        /**\n        * @name visibilityChanged\n        * @desc Pauses/resumes interval updates if window/tab is out of focus.\n        */\n        function visibilityChanged() {\n            if ($document[0].hidden || $document[0].webkitHidden ||\n                $document[0].mozHidden || $document[0].msHidden) {\n                DashboardService.cancelInterval();\n            } else {\n                DashboardService.updateInterval();\n            }\n        }\n\n        /**\n        * @name activate\n        * @desc Initiliazes MainCtrl\n        */\n        function activate() {\n            DashboardService.initialize();\n\n            if ($routeParams.protocol) {\n                $rootScope.properties.protocol = $routeParams.protocol;\n            }\n\n            if ($routeParams.host) {\n                vm.inputHost = $routeParams.host;\n                if ($routeParams.hostspec) {\n                    $rootScope.properties.hostspec = $routeParams.hostspec;\n                }\n                DashboardService.updateHost(vm.inputHost);\n            }\n\n            // hack to deal with window/tab out of focus\n            $document[0]\n                .addEventListener('visibilitychange', visibilityChanged, false);\n            $document[0]\n                .addEventListener('webkitvisibilitychange', visibilityChanged, false);\n            $document[0]\n                .addEventListener('msvisibilitychange', visibilityChanged, false);\n            $document[0]\n                .addEventListener('mozvisibilitychange', visibilityChanged, false);\n\n            if (angular.isDefined($routeParams.widgets)){\n                var widgetNameArr = $routeParams.widgets.split(',') || [];\n                widgetsToLoad = widgetNameArr.reduce(function(all, name){\n                    return all.concat(widgetDefinitions.filter(function(def){\n                        return def.name === name;\n                    }));\n                },[]);\n            } else {\n                var urlArr = widgets.reduce(function(all,item){\n                    all.push(item.name);\n                    return all;\n                },[]).join();\n                $location.search('widgets', urlArr);\n            }\n\n            if (angular.isDefined($routeParams.containerFilter)){\n                $rootScope.properties.containerFilter =  $routeParams.containerFilter;\n            }\n\n            vm.dashboardOptions = {\n                hideToolbar: true,\n                widgetButtons: false,\n                hideWidgetName: true,\n                hideWidgetSettings: false,\n                widgetDefinitions: widgetDefinitions,\n                defaultWidgets: widgetsToLoad\n            };\n        }\n\n        vm.version = version.id;\n\n        vm.embed = embed;\n\n        // Export controller public functions\n        vm.addWidgetToURL = function(widgetObj){\n            var newUrl ='';\n            if (angular.isUndefined($routeParams.widgets)) {\n                $routeParams.widgets = '';\n            } else {\n                newUrl = ',';\n            }\n\n            if (widgetObj.length){\n                $routeParams.widgets = '';\n                newUrl = widgetObj.reduce(function(all,item){\n                    all.push(item.name);\n                    return all;\n                },[]).join();\n            } else {\n                newUrl = newUrl + widgetObj.name;\n            }\n            $location.search('widgets', $routeParams.widgets + newUrl);\n        };\n\n        vm.removeWidgetFromURL = function(widgetObj){\n            var widgetNameArr = $routeParams.widgets.split(',') || [];\n            for (var d=0; d< widgetNameArr.length; d++){\n                if (widgetNameArr[d] === widgetObj.name){\n                    widgetNameArr.splice(d,1);\n                    break;\n                }\n            }\n            if (widgetNameArr.length < 1){\n                vm.removeAllWidgetFromURL();\n            } else {\n                $location.search('widgets', widgetNameArr.toString());\n            }\n        };\n\n        vm.removeAllWidgetFromURL = function(){\n            $location.search('widgets', null);\n        };\n\n        vm.resetDashboard = function(){\n\n            var modalOptions = {\n                closeButtonText: 'Cancel',\n                actionButtonText: 'Ok',\n                headerText: 'Reset Dashboard',\n                bodyText: 'Are you sure you want to reset the dashboard?'\n            };\n\n            ModalService.showModal({}, modalOptions).then(function() {\n                $location.search('container', null);\n                $location.search('containerFilter', null);\n                $rootScope.flags.disableContainerSelectNone = false;\n                $rootScope.properties.selectedContainer = '';\n                $rootScope.properties.containerFilter = '';\n                vm.dashboardOptions.loadWidgets([]);\n                vm.removeAllWidgetFromURL();\n            });\n        };\n\n        vm.updateHost = function() {\n            DashboardService.updateHost(vm.inputHost);\n            ContainerMetadataService.clearIdDictionary();\n        };\n\n        vm.addWidget = function(event, directive){\n            event.preventDefault();\n            if ( vm.checkWidgetType(directive) ) {\n                vm.dashboardOptions.addWidget(directive);\n                vm.addWidgetToURL(directive);\n            }\n        };\n\n        vm.checkWidgetType = function(widgetObj) {\n            if (angular.isDefined(widgetObj.requireContainerFilter) && widgetObj.requireContainerFilter === true && $rootScope.flags.disableContainerSelect === false && !$rootScope.flags.containerSelectOverride) {\n              if ($rootScope.properties.selectedContainer === ''){\n\n                  var modalOptions = {\n                      closeButtonText: '',\n                      actionButtonText: 'Ok',\n                      headerText: 'Error: Container selection required.',\n                      bodyText: 'This widget requires a container to be selected. Please select a container and try again.'\n                  };\n\n                  ModalService.showModal({}, modalOptions).then(function() {\n                      $document.getElementById('selectedContainer').focus();\n                  });\n\n                  return false;\n              }\n            }\n            return true;\n        };\n\n        vm.updateInterval = DashboardService.updateInterval;\n        vm.updateContainer = ContainerMetadataService.updateContainer;\n        vm.updateContainerFilter = ContainerMetadataService.updateContainerFilter;\n        vm.inputHost = '';\n\n        activate();\n    }\n\n    angular\n        .module('main', [\n            'dashboard',\n            'widget',\n            'containermetadata',\n            'modal'\n        ])\n        .controller('MainController', MainCtrl);\n})();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n(function () {\n    'use strict';\n\n    angular\n        .module('vector', [\n            'ngRoute',\n            'ui.dashboard',\n            'toastr',\n            'main'\n        ]);\n\n})();\n\n(function () { 'use strict'; angular.module('vector').constant('version', { 'id': 'v1.1.0-2-g6d01399' }); })();\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n(function () {\n    'use strict';\n\n    /**\n    * @name config\n    * @desc Define valid application routes\n    */\n    function routeConfig($routeProvider) {\n        $routeProvider.when('/', {\n            templateUrl: 'app/main/main.html',\n            controller: 'MainController',\n            controllerAs: 'vm',\n            title: 'Vector',\n            reloadOnSearch: false,\n            resolve: {\n                'widgets': function (defaultWidgets) {\n                    return defaultWidgets;\n                },\n                'embed': function () {\n                  return false;\n                }\n            }\n        }).when('/embed', {\n            templateUrl: 'app/main/main.html',\n            controller: 'MainController',\n            controllerAs: 'vm',\n            title: 'Vector',\n            reloadOnSearch: false,\n            resolve: {\n                'widgets': function (defaultWidgets) {\n                    return defaultWidgets;\n                },\n                'embed': function () {\n                  return true;\n                }\n            }\n        }).when('/empty', {\n            templateUrl: 'app/main/main.html',\n            controller: 'MainController',\n            controllerAs: 'vm',\n            title: 'Vector',\n            reloadOnSearch: false,\n            resolve: {\n                'widgets': function (emptyWidgets) {\n                    return emptyWidgets;\n                },\n                'embed': function () {\n                  return false;\n                }\n            }\n        }).when('/container', {\n            templateUrl: 'app/main/main.html',\n            controller: 'MainController',\n            controllerAs: 'vm',\n            title: 'Vector',\n            reloadOnSearch: false,\n            resolve: {\n                'widgets': function (containerWidgets) {\n                    return containerWidgets;\n                },\n                'embed': function () {\n                  return false;\n                }\n            }\n        })\n        .otherwise('/');\n    }\n\n    angular\n        .module('vector')\n        .config(routeConfig);\n\n})();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n/*jslint node: true*/\n/*global angular*/\n/*jslint plusplus: true */\n\n(function () {\n    'use strict';\n\n    /* Filters */\n\n    /**\n    * @name uniqueItems\n    * @desc\n    */\n    function uniqueItems(data, key) {\n        var result = [],\n            i,\n            value;\n        for (i = 0; i < data.length; i++) {\n            value = data[i][key];\n            if (result.indexOf(value) === -1) {\n                result.push(value);\n            }\n        }\n        return result;\n    }\n\n    /**\n    * @name groupBy\n    * @desc\n    */\n    function groupBy() {\n        return function (collection, key) {\n            if (collection === null) {\n                return;\n            }\n            return uniqueItems(collection, key);\n        };\n    }\n\n    /**\n    * @name groupFilter\n    * @desc\n    */\n    function groupFilter() {\n        return function (collection, group) {\n            return collection.filter(function (item) {\n                return item.group === group;\n            });\n        };\n    }\n\n    angular\n        .module('vector')\n        .filter('groupBy', groupBy)\n        .filter('groupFilter', groupFilter);\n\n})();\n\n/**!\n *\n *  Copyright 2016 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n(function () {\n    'use strict';\n\n    var containerNameResolver = function($http, $log, $rootScope) {\n        var idMap = {};\n        var invalid = {};\n        var torc = true;\n        \n        var resolve = function (id, instanceName) {\n            if (idMap[id]){\n                return idMap[id];\n            } else {\n                if (!invalid[id]){\n                    var url = 'http://' + $rootScope.properties.host + ':' + '31300' + '/getid/';\n                    if (torc){\n                        url = 'http://' + 'wedge-fb-1' + ':' + '3000' + '/service?id=';\n                    }\n                    $http.get(url+id)\n                    .then(function(response){\n                        if (torc){\n                            var result = response.data.result;\n                            if (result !== '' ){\n                                idMap[id]=result;\n                            }\n                        } else {\n                            idMap[id]=response.data;\n                        }\n                    })\n                    .catch(function(){\n                        $log.debug('Unexpected response from resolver');\n                        invalid[id]=true;\n                    });\n                    if (instanceName.values[instanceName.values.length-1].y.indexOf('mesos') !==- 1){\n                        return id;\n                    }\n                }\n            }\n        };\n\n        return {\n          resolve: resolve\n        };\n    };\n\n    angular\n        .module('vector')\n        .factory('containerNameResolver', containerNameResolver)\n        ;\n})();\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n(function () {\n    'use strict';\n\n    /* Decorators */\n\n    function decorators($provide) {\n        /* Register a decorator for the `$interval` service */\n        $provide.decorator('$interval', function ($delegate) {\n\n            /* Keep a reference to the original `cancel()` method */\n            var originalCancel = $delegate.cancel;\n\n            /* Define a new `cancel()` method */\n            $delegate.cancel = function (intervalPromise) {\n\n                /* First, call the original `cancel()` method */\n                var retValue = originalCancel(intervalPromise);\n\n                /* If the promise has been successfully cancelled,\n                 * add a `cancelled` property (with value `true`) */\n                if (retValue && intervalPromise) {\n                    intervalPromise.isCancelled = true;\n                }\n\n                /* Return the value returned by the original method */\n                return retValue;\n            };\n\n            /* Return the original (but \"augmented\") service */\n            return $delegate;\n        });\n    }\n\n    angular\n        .module('vector')\n        .config(decorators);\n\n})();\n\n/**!\n *\n *  Copyright 2016 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n\n/* global moment:false */\n\n(function() {\n  'use strict';\n\n  angular\n    .module('vector')\n    .constant('moment', moment);\n\n})();\n\n/**!\n *\n *  Copyright 2015 Netflix, Inc.\n *\n *     Licensed under the Apache License, Version 2.0 (the \"License\");\n *     you may not use this file except in compliance with the License.\n *     You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *     Unless required by applicable law or agreed to in writing, software\n *     distributed under the License is distributed on an \"AS IS\" BASIS,\n *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *     See the License for the specific language governing permissions and\n *     limitations under the License.\n *\n */\n(function () {\n    'use strict';\n\n    function toastrConfig(toastrConfig) {\n        toastrConfig.allowHtml = true;\n        toastrConfig.timeOut = 8000;\n        toastrConfig.positionClass = 'toast-top-right';\n        toastrConfig.preventDuplicates = true;\n        toastrConfig.progressBar = true;\n    }\n\n    function logProviderConfig($logProvider) {\n        $logProvider.debugEnabled(true);\n    }\n\n    angular\n        .module('vector')\n        .constant('config', {\n            'protocol': 'http', // PMWEBD protocol (http or https)\n            'port': 44323,  // PMWEBD port\n            'hostspec': 'localhost', // Default PMCD hostspec\n            'interval': '2', // Default update interval in seconds\n            'window': '2', // Default graph time window in minutes\n            'enableCpuFlameGraph': false, // Enable CPU flame graph (requires extra PMDA)\n            'enableContainerWidgets': true, // Enable container widgets\n            'disableHostspecInput': false, // Disable hostspec input\n            'disableContainerFilter': false, // Disable container id filter input\n            'disableContainerSelect': false, // Disable container name drop down select\n            'containerSelectOverride': true, // Overrides requireContainerFilter widget option\n            'useCgroupId': false, // Use container cgroup id instead of container name\n            'expandHostname': false, // Automatically expand hostname input when application opens\n            'disableHostnameInputContainerSelect': false // Disable hostname and hostspec input when container is selected\n        })\n        .config(toastrConfig)\n        .config(logProviderConfig);\n})();\n\nangular.module(\"vector\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/main/main.html\",\"<div class=\\\"navbar navbar-inverse navbar-fixed-top\\\" role=navigation ng-if=!vm.embed><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-collapse><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=#/ ><img ng-src=assets/images/vector_owl.png alt=\\\"Vector Owl\\\" height=20></a><a class=navbar-brand href=\\\"javascript:window.location.reload(true);history.pushState(null, \\'\\', location.href.split(\\'?\\')[0]);\\\">Vector</a></div></div></div><div class=dashboard-container ng-class=\\\"{ \\'main-container\\': !vm.embed }\\\"><div class=row><div class=col-md-12><div dashboard=vm.dashboardOptions template-url=app/components/dashboard/dashboard.html class=dashboard-container></div></div></div></div>\");\n$templateCache.put(\"app/components/chart/chart.html\",\"<div><i class=\\\"fa fa-line-chart fa-5x widget-icon\\\" ng-hide=flags.contextAvailable></i><div id={{id}} class=chart ng-hide=!flags.contextAvailable><svg></svg></div></div>\");\n$templateCache.put(\"app/components/customWidgetSettings/customWidgetSettings.html\",\"<div class=modal-header><button type=button class=close data-dismiss=modal aria-hidden=true ng-click=cancel()>&times;</button><h3>Widget Options <small>{{widget.title}}</small></h3></div><div class=modal-body><form name=form novalidate class=form-horizontal><div class=input-group><span class=input-group-addon>Filter</span> <input class=\\\"widgetInput form-control\\\" name=widgetFilter ng-model=result.filter ng-change=\\\"vm.updateFilterWidget(this.widget, result)\\\" ng-keydown=\\\"$event.which === 13 && ok()\\\"></div></form></div><div class=modal-footer><button type=button class=\\\"btn btn-default\\\" ng-click=\\\"cancel(); vm.clearFilterWidget(this.widget);\\\">Cancel</button> <button type=button class=\\\"btn btn-primary\\\" ng-click=ok()>OK</button></div>\");\n$templateCache.put(\"app/components/dashboard/dashboard.html\",\"<div class=row ng-if=!vm.embed><div class=col-md-6><form role=form name=form><div class=\\\"input-group input-group-lg target\\\" ng-class=\\\"{\\'has-error\\': form.host.$invalid && form.host.$dirty}\\\"><span class=input-group-addon ng-click=\\\"flags.isHostnameExpanded = !flags.isHostnameExpanded;\\\">Hostname &nbsp; <i class=\\\"fa fa-plus-square-o\\\" ng-if=!flags.isHostnameExpanded></i><i class=\\\"fa fa-minus-square-o\\\" ng-if=flags.isHostnameExpanded></i></span> <input type=text class=\\\"form-control hostname-input\\\" id=hostnameInput name=host data-content=\\\"Please enter the instance hostname. Port can be specified using the <hostname>:<port> format. Expand to change hostspec.\\\" rel=popover data-placement=bottom data-trigger=hover data-container=body ng-model=vm.inputHost ng-change=vm.updateHost() ng-model-options=\\\"{ updateOn: \\'default\\', debounce: 1000 }\\\" delay=1000 ng-disabled=\\\"flags.contextUpdating == true || ( flags.disableContainerSelectNone && flags.disableHostnameInputContainerSelect)\\\" required placeholder=\\\"Instance Hostname\\\"> <i class=\\\"fa fa-refresh fa-2x form-control-feedback\\\" ng-if=flags.contextUpdating></i> <i class=\\\"fa fa-check fa-2x form-control-feedback\\\" ng-if=flags.contextAvailable></i></div></form></div><div class=\\\"btn-group col-md-2 widget-wrapper\\\" id=widgetWrapper><button id=widgetButton type=button class=\\\"dropdown-toggle btn btn-lg btn-default btn-block widget-button\\\" data-toggle=dropdown>Widget <span class=caret></span></button><ul class=dropdown-menu role=menu><li class=dropdown-submenu ng-repeat=\\\"group in widgetDefs | groupBy: \\'group\\'\\\"><a ng-click=void(0) data-toggle=dropdown>{{group}}</a><ul class=dropdown-menu><li ng-repeat=\\\"widget in widgetDefs | groupFilter: group\\\"><a ng-click=\\\"vm.addWidget($event, widget);\\\">{{widget.title}}</a></li></ul></li><li role=presentation class=divider></li><li><a href=javascript:void(0); ng-click=\\\"loadWidgets(defaultWidgets); vm.addWidgetToURL(defaultWidgets);\\\">Default Widgets</a></li><li><a href=javascript:void(0); ng-click=\\\"loadWidgets(emptyWidgets); vm.removeAllWidgetFromURL();\\\">Clear Widgets</a></li><li role=presentation class=divider></li><li><a href=javascript:void(0); ng-click=vm.resetDashboard();>Reset Dashboard</a></li></ul></div><div class=col-md-2><form role=form><div class=\\\"input-group input-group-lg window\\\" ng-class=\\\"{\\'has-error\\': form.window.$invalid && form.window.$dirty}\\\"><span class=input-group-addon>Window</span><select class=form-control name=window id=windowInput data-content=\\\"The duration window for all charts in this dashboard.\\\" rel=popover data-placement=bottom data-trigger=hover data-container=body ng-model=properties.window ng-change=vm.updateWindow()><option value=2>2 min</option><option value=5>5 min</option><option value=10>10 min</option></select></div></form></div><div class=col-md-2><form role=form><div class=\\\"input-group input-group-lg interval\\\" ng-class=\\\"{\\'has-error\\': form.interval.$invalid && form.interval.$dirty}\\\"><span class=input-group-addon>Interval</span><select class=form-control name=interval id=intervalInput data-content=\\\"The update interval used by all charts in this dashboard.\\\" rel=popover data-placement=bottom data-trigger=hover data-container=body ng-model=properties.interval ng-change=vm.updateInterval()><option value=1>1 sec</option><option value=2>2 sec</option><option value=3>3 sec</option><option value=5>5 sec</option></select></div></form></div></div><div class=row ng-show=flags.isHostnameExpanded ng-if=!vm.embed><div class=col-md-6><form role=form name=form><div class=\\\"input-group input-group-lg target\\\" ng-show=!flags.disableHostspecInput ng-class=\\\"{\\'has-error\\': form.hostspec.$invalid && form.hostspec.$dirty}\\\"><span class=input-group-addon>Hostspec</span> <input type=text class=form-control id=hostspecInput name=host data-content=\\\"Please enter the instance hostspec.\\\" rel=popover data-placement=bottom data-trigger=hover data-container=body ng-model=properties.hostspec ng-change=vm.updateHost() ng-model-options=\\\"{ updateOn: \\'default\\', debounce: 1000 }\\\" delay=1000 ng-disabled=\\\"flags.contextUpdating == true || ( flags.disableContainerSelectNone && flags.disableHostnameInputContainerSelect )\\\" required placeholder=\\\"Instance Hostspec\\\"></div><div class=\\\"input-group input-group-lg target\\\" ng-show=\\\"flags.enableContainerWidgets && !flags.disableContainerFilter\\\"><span class=input-group-addon>Container Filter</span> <input type=text class=form-control id=globalFilterInput name=globalFilter data-content=\\\"Global filter for container widgets\\\" rel=popover data-placement=bottom data-trigger=hover data-container=body ng-model=properties.containerFilter ng-change=vm.updateContainerFilter() ng-model-options=\\\"{ updateOn: \\'default\\', debounce: 1000 }\\\" delay=1000 placeholder=\\\"Container Filter\\\"></div><div class=\\\"input-group input-group-lg target\\\" ng-show=\\\"flags.enableContainerWidgets && !flags.disableContainerSelect\\\"><span class=input-group-addon>Container Id</span><select id=selectedContainer ng-model=properties.selectedContainer ng-change=vm.updateContainer() class=form-control><option ng-disabled=\\\"flags.disableContainerSelectNone && !flags.containerSelectOverride\\\" value=\\\"\\\">All</option><option ng-repeat=\\\"container in properties.containerList\\\">{{container}}</option></select></div></form></div><div class=col-md-6><p class=\\\"lead hostname-label\\\" id=hostnameLabel data-content=\\\"PMCD hostname. The hostname from the actual instance you\\'re monitoring.\\\" rel=popover data-placement=bottom data-trigger=hover data-container=body>{{flags.contextAvailable && properties.hostname ? properties.hostname : \\'Disconnected\\'}}</p></div></div><div class=row><div class=col-md-12><div class=btn-toolbar ng-if=!options.hideToolbar><div class=btn-group ng-if=!options.widgetButtons><button type=button class=\\\"dropdown-toggle btn btn-primary\\\" data-toggle=dropdown>Add Widget <span class=caret></span></button><ul class=dropdown-menu role=menu><li ng-repeat=\\\"widget in widgetDefs\\\"><a href=# ng-click=\\\"addWidgetInternal($event, widget);\\\"><span class=\\\"label label-primary\\\">{{widget.name}}</span></a></li></ul></div><div class=btn-group ng-if=options.widgetButtons><button ng-repeat=\\\"widget in widgetDefs\\\" ng-click=\\\"addWidgetInternal($event, widget);\\\" type=button class=\\\"btn btn-primary\\\">{{widget.name}}</button></div><button class=\\\"btn btn-warning\\\" ng-click=resetWidgetsToDefault()>Default Widgets</button> <button ng-if=\\\"options.storage && options.explicitSave\\\" ng-click=options.saveDashboard() class=\\\"btn btn-success\\\" ng-disabled=!options.unsavedChangeCount>{{ !options.unsavedChangeCount ? \\\"all saved\\\" : \\\"save changes (\\\" + options.unsavedChangeCount + \\\")\\\" }}</button> <button ng-click=clear(); type=button class=\\\"btn btn-info\\\">Clear</button></div><div ui-sortable=sortableOptions ng-model=widgets class=dashboard-widget-area><div ng-repeat=\\\"widget in widgets\\\" ng-style=widget.containerStyle class=widget-container widget><div class=\\\"widget panel panel-default\\\"><div class=\\\"widget-header panel-heading\\\"><h3 class=panel-title><span class=widget-title>{{widget.title}}</span><!-- <span class=\\\"widget-title\\\" ng-dblclick=\\\"editTitle(widget)\\\" ng-hide=\\\"widget.editingTitle\\\">{{widget.title}}</span> --><!-- <form action=\\\"\\\" class=\\\"widget-title\\\" ng-show=\\\"widget.editingTitle\\\" ng-submit=\\\"saveTitleEdit(widget)\\\">\\n                                <input type=\\\"text\\\" ng-model=\\\"widget.title\\\" class=\\\"form-control\\\">\\n                            </form> --> <span class=\\\"label label-primary\\\" ng-if=!options.hideWidgetName>{{widget.name}}</span> <span ng-click=\\\"removeWidget(widget);  vm.removeWidgetFromURL(widget);\\\" class=\\\"glyphicon glyphicon-remove\\\" ng-if=!options.hideWidgetClose></span> <span ng-click=openWidgetSettings(widget); class=\\\"glyphicon glyphicon-cog\\\" ng-if=\\\"!options.hideWidgetSettings && widget.hasLocalSettings\\\"></span></h3></div><div class=\\\"panel-body widget-content\\\" ng-style=widget.contentStyle></div><div class=widget-ew-resizer ng-mousedown=grabResizer($event)></div><div ng-if=widget.enableVerticalResize class=widget-s-resizer ng-mousedown=grabSouthResizer($event)></div></div></div></div></div></div><div class=\\\"row version-div\\\" ng-if=!vm.embed>Version: {{vm.version}}</div><script>(function () {\\n        \\'use strict\\';\\n        $(\\'#hostnameInput\\').popover();\\n        $(\\'#hostspecInput\\').popover();\\n        $(\\'#globalFilterInput\\').popover();\\n        $(\\'#windowInput\\').popover();\\n        $(\\'#intervalInput\\').popover();\\n        $(\\'#hostnameLabel\\').popover();\\n    }());</script>\");\n$templateCache.put(\"app/components/flamegraph/flamegraph.html\",\"<div class=col-md-12><div class=row style=\\\"text-align: center\\\"><p>Click on the button below to generate a CPU flame graph! (60 sec)</p><button type=button class=\\\"btn btn-primary\\\" ng-disabled=processing ng-click=generateFlameGraph()>Generate Flame Graph <i ng-if=processing class=\\\"fa fa-refresh fa-spin\\\"></i></button></div><div class=row ng-if=\\\"!processing && ready\\\" style=\\\"text-align: center; margin-top: 15px\\\"><p>The CPU flame graph is ready. Please click on the button below to open it.</p><a class=\\\"btn btn-default\\\" href=http://{{host}}:{{port}}/systack/systack.svg target=_blank>Open Flame Graph</a></div></div>\");}]);"],"sourceRoot":"/source/"}